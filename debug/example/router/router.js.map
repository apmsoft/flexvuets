{"version":3,"file":"router.js","names":["UrlManager","AsyncTask","Notice","Faq","onReady","App","_n","_f","window","observable","Observable","subscribe","Activity","onBackPressed","state","Log","clear","i","document","querySelectorAll","forEach","el","addEventListener","path","dataset","location","hash","urlManager","toString","routes","URL","import","meta","url","href","Router","filter","pathinfo","d","parse_path","length","slice","join","mymodule_path","mode","doImport","then","Module","componentActivity","ComponentActivity","doList","parse_query","doPost","doEdit","doReply","doView"],"sources":["router.js"],"sourcesContent":["import UrlManager from '@flexvue/core/urlmanager.class.js';\nimport AsyncTask from '@flexvue/core/asynctask.class.js';\nimport { Notice } from '../observable/notice.class.js';\nimport { Faq } from '../observable/faq.class.js';\nconst onReady = () => {\n    // 기본 클래스 선언\n    new App();\n    // observable test /--------------------------\n    const _n = new Notice();\n    const _f = new Faq();\n    window.observable = new Observable(['public', 'sub']);\n    // public 채널 구독\n    window.observable.subscribe('public', _n);\n    window.observable.subscribe('public', _f);\n    // 뒤로 가기 시 실행\n    new Activity().onBackPressed(state => {\n        Log.clear();\n        Log.i('onBackPressed : ', state);\n    });\n    // 라우터 테스트용 버튼 활성화\n    document.querySelectorAll('.btn-router').forEach((el) => {\n        el.addEventListener('click', function () {\n            const path = el.dataset.path;\n            window.location.hash = `#${path}`;\n        });\n    });\n    /**\n     * router /===========================================>\n     */\n    const urlManager = new UrlManager(document.location.toString());\n    // routes 경로 설정\n    const routes = {\n        '/': new URL('../js/dashboard.class.js', import.meta.url).href,\n        '/bbs/notice': new URL('../js/notice.class.js', import.meta.url).href,\n        '/bbs/faq': new URL('../js/faq.class.js', import.meta.url).href,\n    };\n    // Router\n    new Router(urlManager.hash).filter(function (pathinfo) {\n        if (pathinfo.url == '') {\n            return;\n        }\n        Log.d('pathinfo', pathinfo);\n        // make module path\n        const path = (pathinfo.parse_path.length > 0) ? pathinfo.parse_path.slice(0, -1).join('') : pathinfo.path;\n        Log.d('path', path);\n        // find mymodule path\n        const mymodule_path = routes[path];\n        Log.d('mymodule_path', mymodule_path);\n        if (typeof mymodule_path !== 'undefined' && mymodule_path !== null) {\n            let mode = pathinfo.parse_path.slice(-1);\n            mode = mode.length > 0 ? mode : pathinfo.path;\n            Log.d('mode', mode);\n            // dynamic import mymodule\n            new AsyncTask().doImport(mymodule_path)\n                .then(Module => {\n                const componentActivity = new Module.ComponentActivity();\n                if (mode == '/') {\n                    componentActivity.doList(pathinfo.parse_query);\n                }\n                else if (mode == '/post') {\n                    componentActivity.doPost(pathinfo.parse_query);\n                }\n                else if (mode == '/edit') {\n                    componentActivity.doEdit(pathinfo.parse_query);\n                }\n                else if (mode == '/reply') {\n                    componentActivity.doReply(pathinfo.parse_query);\n                }\n                else if (mode == '/view') {\n                    componentActivity.doView(pathinfo.parse_query);\n                }\n                else if (mode == '/list') {\n                    componentActivity.doList(pathinfo.parse_query);\n                }\n            });\n        }\n    });\n    // <-----router\n};\n// document ready\ndocument.addEventListener(\"DOMContentLoaded\", onReady);\n"],"mappings":"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","ignoreList":[]}