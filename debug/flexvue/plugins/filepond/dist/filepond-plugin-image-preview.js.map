{"version":3,"file":"filepond-plugin-image-preview.js","names":["global","factory","exports","module","define","amd","self","FilePondPluginImagePreview","isPreviewableImage","file","test","type","_typeof","obj","Symbol","iterator","constructor","prototype","REACT_ELEMENT_TYPE","_jsx","props","key","children","for","defaultProps","childrenLength","arguments","length","propName","childArray","Array","i","$$typeof","undefined","ref","_owner","_asyncIterator","iterable","method","asyncIterator","call","TypeError","_AwaitValue","value","wrapped","_AsyncGenerator","gen","front","back","send","arg","Promise","resolve","reject","request","next","resume","result","wrappedAwait","then","settle","done","err","_invoke","return","throw","_wrapAsyncGenerator","fn","apply","_awaitAsyncGenerator","_asyncGeneratorDelegate","inner","awaitWrap","iter","waiting","pump","asyncGeneratorStep","_next","_throw","info","error","_asyncToGenerator","args","_classCallCheck","instance","Constructor","_defineProperties","target","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","_defineEnumerableProperties","descs","desc","getOwnPropertySymbols","objectSymbols","sym","_defaults","defaults","keys","getOwnPropertyNames","getOwnPropertyDescriptor","_defineProperty","_extends","assign","source","hasOwnProperty","_objectSpread","ownKeys","concat","filter","forEach","_inherits","subClass","superClass","create","_setPrototypeOf","_inheritsLoose","__proto__","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","p","isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","e","_construct","Parent","Class","a","push","Function","bind","_isNativeFunction","indexOf","_wrapNativeSuper","_cache","Map","has","get","set","Wrapper","_instanceof","left","right","hasInstance","_interopRequireDefault","__esModule","default","_interopRequireWildcard","newObj","_newArrowCheck","innerThis","boundThis","_objectDestructuringEmpty","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","propertyIsEnumerable","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_superPropBase","object","property","_get","receiver","base","_set","isStrict","s","Error","_taggedTemplateLiteral","strings","raw","slice","freeze","defineProperties","_taggedTemplateLiteralLoose","_temporalRef","val","name","_temporalUndefined","_readOnlyError","_classNameTDZError","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_slicedToArrayLoose","_iterableToArrayLimitLoose","_toArray","_iterableToArray","_toConsumableArray","_arrayWithoutHoles","_nonIterableSpread","isArray","arr2","from","_arr","_n","_d","_e","_i","_s","_iterator","_step","_skipFirstGeneratorNext","it","_toPrimitive","input","hint","prim","toPrimitive","res","String","Number","_toPropertyKey","_initializerWarningHelper","context","_initializerDefineProperty","initializer","_applyDecoratedDescriptor","decorators","reverse","reduce","decorator","id","_classPrivateFieldLooseKey","_classPrivateFieldLooseBase","privateKey","_classPrivateFieldGet","privateMap","_classPrivateFieldSet","_classStaticPrivateFieldSpecGet","classConstructor","_classStaticPrivateFieldSpecSet","_classStaticPrivateMethodGet","_classStaticPrivateMethodSet","_decorate","mixins","api","_getDecoratorsApi","r","initialize","O","initializeInstanceElements","decorated","elements","decorateClass","_coalesceClassElements","d","map","_createElementDescriptor","initializeClassElements","F","runClassFinishers","finishers","elementsDefinitionOrder","kind","element","placement","defineClassElement","proto","newElements","placements","static","own","addElementPlacement","_hasDecorators","elementFinishersExtras","decorateElement","extras","decorateConstructor","silent","splice","elementObject","fromElementDescriptor","elementFinisherExtras","toElementFinisherExtras","finisher","newExtras","j","fromClassDescriptor","elementsAndFinisher","toClassDescriptor","k","toStringTag","toElementDescriptors","elementObjects","toElementDescriptor","disallowProperty","_optionalCallableProperty","newConstructor","objectType","def","_coalesceGetterSetter","other","isSameElement","find","_isDataDescriptor","_classPrivateMethodGet","privateSet","_classPrivateMethodSet","_wrapRegExp","re","groups","BabelRegExp","_RegExp","RegExp","_super","_groups","WeakMap","_this","exec","str","buildGroups","replace","substitution","_","g","vectorMultiply","v","amount","createVector","x","y","vectorAdd","b","vectorNormalize","l","Math","sqrt","vectorRotate","radians","origin","cos","sin","t","getMarkupValue","size","scalar","axis","parseFloat","min","width","height","getMarkupStyles","markup","scale","lineStyle","borderStyle","fill","backgroundColor","fontColor","stroke","borderColor","lineColor","strokeWidth","borderWidth","lineWidth","lineCap","lineJoin","dashes","join","opacity","isDefined","getMarkupRect","rect","top","bottom","pointsToPathShape","points","point","index","setAttributes","attr","setAttribute","ns","svg","tag","document","createElementNS","updateRect","styles","updateEllipse","cx","cy","rx","ry","IMAGE_FIT_STYLE","contain","cover","updateImage","preserveAspectRatio","fit","TEXT_ANCHOR","center","updateText","fontSize","fontFamily","fontWeight","textAlign","text","textContent","updateLine","line","childNodes","begin","end","x1","y1","x2","y2","lineDecoration","style","display","arrowBeginRotationPoint","arrowBeginCenter","arrowBeginA","arrowBeginB","arrowEndRotationPoint","arrowEndCenter","arrowEndA","arrowEndB","updatePath","createShape","node","createImage","shape","onload","setAttributeNS","src","createLine","appendChild","CREATE_TYPE_ROUTES","image","ellipse","path","UPDATE_TYPE_ROUTES","createMarkupByType","updateMarkupByType","MARKUP_RECT","toOptionalFraction","prepareMarkup","_markup","prev","curr","zIndex","sortMarkupByZIndex","createMarkupView","utils","createView","ignoreRect","apis","write","_ref","root","dirty","crop","resize","viewWidth","viewHeight","cropWidth","cropHeight","_size","outputWidth","outputHeight","outputFit","mode","outputUpscale","upscale","shouldUpscale","scalarWidth","scalarHeight","max","innerHTML","markupFilter","query","sort","settings","createVector$1","vectorDot","vectorSubtract","vectorDistanceSquared","vectorDistance","getOffsetPointOnEdge","rotation","A","B","C","sinA","sinB","sinC","cosC","ratio","c","getRotatedRectSize","w","h","hor","ver","tl","abs","tr","bl","calculateCanvasSize","canvasAspectRatio","zoom","imageAspectRatio","canvasWidth","canvasHeight","imgWidth","imgHeight","getImageRectZoomFactor","imageRect","cropRect","imageWidth","imageHeight","rotatedCropSize","getCenteredCropRect","container","aspectRatio","getCurrentCropSize","imageSize","canvasSize","canvasCenter","stage","shouldLimit","scaleToFit","stageZoomFactor","widthFloat","heightFloat","round","IMAGE_SCALE_SPRING_PROPS","stiffness","damping","mass","createBitmapView","createImageCanvasWrapper","animations","originX","originY","scaleX","scaleY","translateX","translateY","rotateZ","_ref2","bitmap","appendChildView","createChildView","_ref3","flip","horizontal","vertical","createClipView","duration","didWriteView","_ref4","background","_ref5","createMarkup","destroyMarkup","removeChildView","transparencyIndicator","dataset","_ref6","shouldOptimize","translation","PI","cropAspectRatio","imageView","createImageView","_ref7","clip","_ref8","hidden","containerWidth","containerHeight","fixedPreviewHeight","minPreviewHeight","maxPreviewHeight","panelAspectRatio","allowMultiple","clipHeight","clipWidth","SVG_MASK","checkedMyBases","SVGMaskUniqueId","createImageOverlayView","fpAPI","querySelector","window","location","href","hash","classList","add","status","BitmapWorker","onmessage","createImageBitmap","data","message","postMessage","ColorMatrixWorker","imageData","matrix","colorMatrix","m11","m12","m13","m14","m15","m21","m22","m23","m24","m25","m31","m32","m33","m34","m35","m41","m42","m43","m44","m45","buffer","getImageSize","url","cb","Image","naturalWidth","naturalHeight","transforms","fixImageOrientation","ctx","orientation","transform","createPreviewImage","canvas","createElement","getContext","drawImage","isBitmap","MAX_WIDTH","MAX_HEIGHT","calculateAverageColor","ceil","getImageData","averageColor","floor","cloneCanvas","cloneImageData","ImageData","createImageData","Uint8ClampedArray","loadImage","img","crossOrigin","onerror","createImageWrapperView","OverlayView","ImageView","createWorker","applyFilter","putImageData","worker","post","response","terminate","removeImageView","_destroy","shiftImage","images","shift","imageViewBin","pushImage","item","getMetadata","childViews","setTimeout","dispatch","didUpdateItemMetadata","action","change","_imageView","canCreateImageBitmap","userAgent","navigator","isFirefox","match","firefoxVersion","parseInt","didCreatePreviewContainer","fileURL","URL","createObjectURL","drawPreview","loadPreviewFallback","previewImageLoaded","revokeObjectURL","exif","pixelDensityFactor","devicePixelRatio","zoomFactor","scaleFactor","previewImageRatio","previewContainerWidth","previewContainerHeight","previewImage","setMetadata","close","overlayShadow","imageBitmap","didDrawPreview","restoreOverlay","_ref9","overlayError","overlaySuccess","didThrowError","_ref10","didCompleteProcessing","_ref11","_ref12","destroy","_ref13","_ref14","createRoute","DID_IMAGE_PREVIEW_DRAW","DID_IMAGE_PREVIEW_CONTAINER_CREATE","DID_FINISH_CALCULATE_PREVIEWSIZE","DID_UPDATE_ITEM_METADATA","DID_THROW_ITEM_LOAD_ERROR","DID_THROW_ITEM_PROCESSING_ERROR","DID_THROW_ITEM_INVALID","DID_COMPLETE_ITEM_PROCESSING","DID_START_ITEM_PROCESSING","DID_REVERT_ITEM_PROCESSING","_ref15","viewsToRemove","plugin","addFilter","Type","isFile","imagePreviewView","viewAPI","is","view","didLoadItem","archived","supportsCreateImageBitmap","maxPreviewFileSize","imagePreview","queue","rescaleItem","itemPanelAspectRatio","fixedHeight","_root$ref","previewAspectRatio","previewHeightMax","itemWidth","previewHeight","didResizeView","shouldRescale","didCalculatePreviewSize","shouldDrawPreview","registerWriter","DID_RESIZE_ROOT","DID_STOP_RESIZE","DID_LOAD_ITEM","DID_IMAGE_PREVIEW_CALCULATE_SIZE","requestAnimationFrame","options","allowImagePreview","BOOLEAN","imagePreviewFilterItem","FUNCTION","imagePreviewHeight","INT","imagePreviewMinHeight","imagePreviewMaxHeight","imagePreviewMaxFileSize","imagePreviewZoomFactor","imagePreviewUpscale","imagePreviewMaxInstantPreviewFileSize","imagePreviewTransparencyIndicator","STRING","imagePreviewCalculateAverageImageColor","imagePreviewMarkupShow","imagePreviewMarkupFilter","isBrowser","dispatchEvent","CustomEvent","detail"],"sources":["filepond-plugin-image-preview.js"],"sourcesContent":["\"use strict\";\n/*!\n * FilePondPluginImagePreview 4.6.5\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n/* eslint-disable */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? (module.exports = factory())\n        : typeof define === 'function' && define.amd\n            ? define(factory)\n            : ((global = global || self),\n                (global.FilePondPluginImagePreview = factory()));\n})(this, function () {\n    'use strict';\n    // test if file is of type image and can be viewed in canvas\n    var isPreviewableImage = function isPreviewableImage(file) {\n        return /^image/.test(file.type);\n    };\n    function _typeof(obj) {\n        if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n            _typeof = function (obj) {\n                return typeof obj;\n            };\n        }\n        else {\n            _typeof = function (obj) {\n                return obj &&\n                    typeof Symbol === 'function' &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? 'symbol'\n                    : typeof obj;\n            };\n        }\n        return _typeof(obj);\n    }\n    var REACT_ELEMENT_TYPE;\n    function _jsx(type, props, key, children) {\n        if (!REACT_ELEMENT_TYPE) {\n            REACT_ELEMENT_TYPE =\n                (typeof Symbol === 'function' &&\n                    Symbol.for &&\n                    Symbol.for('react.element')) ||\n                    0xeac7;\n        }\n        var defaultProps = type && type.defaultProps;\n        var childrenLength = arguments.length - 3;\n        if (!props && childrenLength !== 0) {\n            props = {\n                children: void 0\n            };\n        }\n        if (props && defaultProps) {\n            for (var propName in defaultProps) {\n                if (props[propName] === void 0) {\n                    props[propName] = defaultProps[propName];\n                }\n            }\n        }\n        else if (!props) {\n            props = defaultProps || {};\n        }\n        if (childrenLength === 1) {\n            props.children = children;\n        }\n        else if (childrenLength > 1) {\n            var childArray = new Array(childrenLength);\n            for (var i = 0; i < childrenLength; i++) {\n                childArray[i] = arguments[i + 3];\n            }\n            props.children = childArray;\n        }\n        return {\n            $$typeof: REACT_ELEMENT_TYPE,\n            type: type,\n            key: key === undefined ? null : '' + key,\n            ref: null,\n            props: props,\n            _owner: null\n        };\n    }\n    function _asyncIterator(iterable) {\n        var method;\n        if (typeof Symbol === 'function') {\n            if (Symbol.asyncIterator) {\n                method = iterable[Symbol.asyncIterator];\n                if (method != null)\n                    return method.call(iterable);\n            }\n            if (Symbol.iterator) {\n                method = iterable[Symbol.iterator];\n                if (method != null)\n                    return method.call(iterable);\n            }\n        }\n        throw new TypeError('Object is not async iterable');\n    }\n    function _AwaitValue(value) {\n        this.wrapped = value;\n    }\n    function _AsyncGenerator(gen) {\n        var front, back;\n        function send(key, arg) {\n            return new Promise(function (resolve, reject) {\n                var request = {\n                    key: key,\n                    arg: arg,\n                    resolve: resolve,\n                    reject: reject,\n                    next: null\n                };\n                if (back) {\n                    back = back.next = request;\n                }\n                else {\n                    front = back = request;\n                    resume(key, arg);\n                }\n            });\n        }\n        function resume(key, arg) {\n            try {\n                var result = gen[key](arg);\n                var value = result.value;\n                var wrappedAwait = value instanceof _AwaitValue;\n                Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n                    if (wrappedAwait) {\n                        resume('next', arg);\n                        return;\n                    }\n                    settle(result.done ? 'return' : 'normal', arg);\n                }, function (err) {\n                    resume('throw', err);\n                });\n            }\n            catch (err) {\n                settle('throw', err);\n            }\n        }\n        function settle(type, value) {\n            switch (type) {\n                case 'return':\n                    front.resolve({\n                        value: value,\n                        done: true\n                    });\n                    break;\n                case 'throw':\n                    front.reject(value);\n                    break;\n                default:\n                    front.resolve({\n                        value: value,\n                        done: false\n                    });\n                    break;\n            }\n            front = front.next;\n            if (front) {\n                resume(front.key, front.arg);\n            }\n            else {\n                back = null;\n            }\n        }\n        this._invoke = send;\n        if (typeof gen.return !== 'function') {\n            this.return = undefined;\n        }\n    }\n    if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n        _AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n            return this;\n        };\n    }\n    _AsyncGenerator.prototype.next = function (arg) {\n        return this._invoke('next', arg);\n    };\n    _AsyncGenerator.prototype.throw = function (arg) {\n        return this._invoke('throw', arg);\n    };\n    _AsyncGenerator.prototype.return = function (arg) {\n        return this._invoke('return', arg);\n    };\n    function _wrapAsyncGenerator(fn) {\n        return function () {\n            return new _AsyncGenerator(fn.apply(this, arguments));\n        };\n    }\n    function _awaitAsyncGenerator(value) {\n        return new _AwaitValue(value);\n    }\n    function _asyncGeneratorDelegate(inner, awaitWrap) {\n        var iter = {}, waiting = false;\n        function pump(key, value) {\n            waiting = true;\n            value = new Promise(function (resolve) {\n                resolve(inner[key](value));\n            });\n            return {\n                done: false,\n                value: awaitWrap(value)\n            };\n        }\n        if (typeof Symbol === 'function' && Symbol.iterator) {\n            iter[Symbol.iterator] = function () {\n                return this;\n            };\n        }\n        iter.next = function (value) {\n            if (waiting) {\n                waiting = false;\n                return value;\n            }\n            return pump('next', value);\n        };\n        if (typeof inner.throw === 'function') {\n            iter.throw = function (value) {\n                if (waiting) {\n                    waiting = false;\n                    throw value;\n                }\n                return pump('throw', value);\n            };\n        }\n        if (typeof inner.return === 'function') {\n            iter.return = function (value) {\n                return pump('return', value);\n            };\n        }\n        return iter;\n    }\n    function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n        try {\n            var info = gen[key](arg);\n            var value = info.value;\n        }\n        catch (error) {\n            reject(error);\n            return;\n        }\n        if (info.done) {\n            resolve(value);\n        }\n        else {\n            Promise.resolve(value).then(_next, _throw);\n        }\n    }\n    function _asyncToGenerator(fn) {\n        return function () {\n            var self = this, args = arguments;\n            return new Promise(function (resolve, reject) {\n                var gen = fn.apply(self, args);\n                function _next(value) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'next', value);\n                }\n                function _throw(err) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n                }\n                _next(undefined);\n            });\n        };\n    }\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError('Cannot call a class as a function');\n        }\n    }\n    function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if ('value' in descriptor)\n                descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }\n    function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps)\n            _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps)\n            _defineProperties(Constructor, staticProps);\n        return Constructor;\n    }\n    function _defineEnumerableProperties(obj, descs) {\n        for (var key in descs) {\n            var desc = descs[key];\n            desc.configurable = desc.enumerable = true;\n            if ('value' in desc)\n                desc.writable = true;\n            Object.defineProperty(obj, key, desc);\n        }\n        if (Object.getOwnPropertySymbols) {\n            var objectSymbols = Object.getOwnPropertySymbols(descs);\n            for (var i = 0; i < objectSymbols.length; i++) {\n                var sym = objectSymbols[i];\n                var desc = descs[sym];\n                desc.configurable = desc.enumerable = true;\n                if ('value' in desc)\n                    desc.writable = true;\n                Object.defineProperty(obj, sym, desc);\n            }\n        }\n        return obj;\n    }\n    function _defaults(obj, defaults) {\n        var keys = Object.getOwnPropertyNames(defaults);\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = Object.getOwnPropertyDescriptor(defaults, key);\n            if (value && value.configurable && obj[key] === undefined) {\n                Object.defineProperty(obj, key, value);\n            }\n        }\n        return obj;\n    }\n    function _defineProperty(obj, key, value) {\n        if (key in obj) {\n            Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true\n            });\n        }\n        else {\n            obj[key] = value;\n        }\n        return obj;\n    }\n    function _extends() {\n        _extends =\n            Object.assign ||\n                function (target) {\n                    for (var i = 1; i < arguments.length; i++) {\n                        var source = arguments[i];\n                        for (var key in source) {\n                            if (Object.prototype.hasOwnProperty.call(source, key)) {\n                                target[key] = source[key];\n                            }\n                        }\n                    }\n                    return target;\n                };\n        return _extends.apply(this, arguments);\n    }\n    function _objectSpread(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i] != null ? arguments[i] : {};\n            var ownKeys = Object.keys(source);\n            if (typeof Object.getOwnPropertySymbols === 'function') {\n                ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n                    return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n                }));\n            }\n            ownKeys.forEach(function (key) {\n                _defineProperty(target, key, source[key]);\n            });\n        }\n        return target;\n    }\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== 'function' && superClass !== null) {\n            throw new TypeError('Super expression must either be null or a function');\n        }\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n            }\n        });\n        if (superClass)\n            _setPrototypeOf(subClass, superClass);\n    }\n    function _inheritsLoose(subClass, superClass) {\n        subClass.prototype = Object.create(superClass.prototype);\n        subClass.prototype.constructor = subClass;\n        subClass.__proto__ = superClass;\n    }\n    function _getPrototypeOf(o) {\n        _getPrototypeOf = Object.setPrototypeOf\n            ? Object.getPrototypeOf\n            : function _getPrototypeOf(o) {\n                return o.__proto__ || Object.getPrototypeOf(o);\n            };\n        return _getPrototypeOf(o);\n    }\n    function _setPrototypeOf(o, p) {\n        _setPrototypeOf =\n            Object.setPrototypeOf ||\n                function _setPrototypeOf(o, p) {\n                    o.__proto__ = p;\n                    return o;\n                };\n        return _setPrototypeOf(o, p);\n    }\n    function isNativeReflectConstruct() {\n        if (typeof Reflect === 'undefined' || !Reflect.construct)\n            return false;\n        if (Reflect.construct.sham)\n            return false;\n        if (typeof Proxy === 'function')\n            return true;\n        try {\n            Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n            return true;\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    function _construct(Parent, args, Class) {\n        if (isNativeReflectConstruct()) {\n            _construct = Reflect.construct;\n        }\n        else {\n            _construct = function _construct(Parent, args, Class) {\n                var a = [null];\n                a.push.apply(a, args);\n                var Constructor = Function.bind.apply(Parent, a);\n                var instance = new Constructor();\n                if (Class)\n                    _setPrototypeOf(instance, Class.prototype);\n                return instance;\n            };\n        }\n        return _construct.apply(null, arguments);\n    }\n    function _isNativeFunction(fn) {\n        return Function.toString.call(fn).indexOf('[native code]') !== -1;\n    }\n    function _wrapNativeSuper(Class) {\n        var _cache = typeof Map === 'function' ? new Map() : undefined;\n        _wrapNativeSuper = function _wrapNativeSuper(Class) {\n            if (Class === null || !_isNativeFunction(Class))\n                return Class;\n            if (typeof Class !== 'function') {\n                throw new TypeError('Super expression must either be null or a function');\n            }\n            if (typeof _cache !== 'undefined') {\n                if (_cache.has(Class))\n                    return _cache.get(Class);\n                _cache.set(Class, Wrapper);\n            }\n            function Wrapper() {\n                return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n            }\n            Wrapper.prototype = Object.create(Class.prototype, {\n                constructor: {\n                    value: Wrapper,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true\n                }\n            });\n            return _setPrototypeOf(Wrapper, Class);\n        };\n        return _wrapNativeSuper(Class);\n    }\n    function _instanceof(left, right) {\n        if (right != null &&\n            typeof Symbol !== 'undefined' &&\n            right[Symbol.hasInstance]) {\n            return right[Symbol.hasInstance](left);\n        }\n        else {\n            return left instanceof right;\n        }\n    }\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule\n            ? obj\n            : {\n                default: obj\n            };\n    }\n    function _interopRequireWildcard(obj) {\n        if (obj && obj.__esModule) {\n            return obj;\n        }\n        else {\n            var newObj = {};\n            if (obj != null) {\n                for (var key in obj) {\n                    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                        var desc = Object.defineProperty && Object.getOwnPropertyDescriptor\n                            ? Object.getOwnPropertyDescriptor(obj, key)\n                            : {};\n                        if (desc.get || desc.set) {\n                            Object.defineProperty(newObj, key, desc);\n                        }\n                        else {\n                            newObj[key] = obj[key];\n                        }\n                    }\n                }\n            }\n            newObj.default = obj;\n            return newObj;\n        }\n    }\n    function _newArrowCheck(innerThis, boundThis) {\n        if (innerThis !== boundThis) {\n            throw new TypeError('Cannot instantiate an arrow function');\n        }\n    }\n    function _objectDestructuringEmpty(obj) {\n        if (obj == null)\n            throw new TypeError('Cannot destructure undefined');\n    }\n    function _objectWithoutPropertiesLoose(source, excluded) {\n        if (source == null)\n            return {};\n        var target = {};\n        var sourceKeys = Object.keys(source);\n        var key, i;\n        for (i = 0; i < sourceKeys.length; i++) {\n            key = sourceKeys[i];\n            if (excluded.indexOf(key) >= 0)\n                continue;\n            target[key] = source[key];\n        }\n        return target;\n    }\n    function _objectWithoutProperties(source, excluded) {\n        if (source == null)\n            return {};\n        var target = _objectWithoutPropertiesLoose(source, excluded);\n        var key, i;\n        if (Object.getOwnPropertySymbols) {\n            var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n            for (i = 0; i < sourceSymbolKeys.length; i++) {\n                key = sourceSymbolKeys[i];\n                if (excluded.indexOf(key) >= 0)\n                    continue;\n                if (!Object.prototype.propertyIsEnumerable.call(source, key))\n                    continue;\n                target[key] = source[key];\n            }\n        }\n        return target;\n    }\n    function _assertThisInitialized(self) {\n        if (self === void 0) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n        return self;\n    }\n    function _possibleConstructorReturn(self, call) {\n        if (call && (typeof call === 'object' || typeof call === 'function')) {\n            return call;\n        }\n        return _assertThisInitialized(self);\n    }\n    function _superPropBase(object, property) {\n        while (!Object.prototype.hasOwnProperty.call(object, property)) {\n            object = _getPrototypeOf(object);\n            if (object === null)\n                break;\n        }\n        return object;\n    }\n    function _get(target, property, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.get) {\n            _get = Reflect.get;\n        }\n        else {\n            _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n                if (!base)\n                    return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n                if (desc.get) {\n                    return desc.get.call(receiver);\n                }\n                return desc.value;\n            };\n        }\n        return _get(target, property, receiver || target);\n    }\n    function set(target, property, value, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.set) {\n            set = Reflect.set;\n        }\n        else {\n            set = function set(target, property, value, receiver) {\n                var base = _superPropBase(target, property);\n                var desc;\n                if (base) {\n                    desc = Object.getOwnPropertyDescriptor(base, property);\n                    if (desc.set) {\n                        desc.set.call(receiver, value);\n                        return true;\n                    }\n                    else if (!desc.writable) {\n                        return false;\n                    }\n                }\n                desc = Object.getOwnPropertyDescriptor(receiver, property);\n                if (desc) {\n                    if (!desc.writable) {\n                        return false;\n                    }\n                    desc.value = value;\n                    Object.defineProperty(receiver, property, desc);\n                }\n                else {\n                    _defineProperty(receiver, property, value);\n                }\n                return true;\n            };\n        }\n        return set(target, property, value, receiver);\n    }\n    function _set(target, property, value, receiver, isStrict) {\n        var s = set(target, property, value, receiver || target);\n        if (!s && isStrict) {\n            throw new Error('failed to set property');\n        }\n        return value;\n    }\n    function _taggedTemplateLiteral(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n        return Object.freeze(Object.defineProperties(strings, {\n            raw: {\n                value: Object.freeze(raw)\n            }\n        }));\n    }\n    function _taggedTemplateLiteralLoose(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n        strings.raw = raw;\n        return strings;\n    }\n    function _temporalRef(val, name) {\n        if (val === _temporalUndefined) {\n            throw new ReferenceError(name + ' is not defined - temporal dead zone');\n        }\n        else {\n            return val;\n        }\n    }\n    function _readOnlyError(name) {\n        throw new Error('\"' + name + '\" is read-only');\n    }\n    function _classNameTDZError(name) {\n        throw new Error('Class \"' + name + '\" cannot be referenced in computed property keys.');\n    }\n    var _temporalUndefined = {};\n    function _slicedToArray(arr, i) {\n        return (_arrayWithHoles(arr) ||\n            _iterableToArrayLimit(arr, i) ||\n            _nonIterableRest());\n    }\n    function _slicedToArrayLoose(arr, i) {\n        return (_arrayWithHoles(arr) ||\n            _iterableToArrayLimitLoose(arr, i) ||\n            _nonIterableRest());\n    }\n    function _toArray(arr) {\n        return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n    }\n    function _toConsumableArray(arr) {\n        return (_arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread());\n    }\n    function _arrayWithoutHoles(arr) {\n        if (Array.isArray(arr)) {\n            for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++)\n                arr2[i] = arr[i];\n            return arr2;\n        }\n    }\n    function _arrayWithHoles(arr) {\n        if (Array.isArray(arr))\n            return arr;\n    }\n    function _iterableToArray(iter) {\n        if (Symbol.iterator in Object(iter) ||\n            Object.prototype.toString.call(iter) === '[object Arguments]')\n            return Array.from(iter);\n    }\n    function _iterableToArrayLimit(arr, i) {\n        var _arr = [];\n        var _n = true;\n        var _d = false;\n        var _e = undefined;\n        try {\n            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n                _arr.push(_s.value);\n                if (i && _arr.length === i)\n                    break;\n            }\n        }\n        catch (err) {\n            _d = true;\n            _e = err;\n        }\n        finally {\n            try {\n                if (!_n && _i['return'] != null)\n                    _i['return']();\n            }\n            finally {\n                if (_d)\n                    throw _e;\n            }\n        }\n        return _arr;\n    }\n    function _iterableToArrayLimitLoose(arr, i) {\n        var _arr = [];\n        for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {\n            _arr.push(_step.value);\n            if (i && _arr.length === i)\n                break;\n        }\n        return _arr;\n    }\n    function _nonIterableSpread() {\n        throw new TypeError('Invalid attempt to spread non-iterable instance');\n    }\n    function _nonIterableRest() {\n        throw new TypeError('Invalid attempt to destructure non-iterable instance');\n    }\n    function _skipFirstGeneratorNext(fn) {\n        return function () {\n            var it = fn.apply(this, arguments);\n            it.next();\n            return it;\n        };\n    }\n    function _toPrimitive(input, hint) {\n        if (typeof input !== 'object' || input === null)\n            return input;\n        var prim = input[Symbol.toPrimitive];\n        if (prim !== undefined) {\n            var res = prim.call(input, hint || 'default');\n            if (typeof res !== 'object')\n                return res;\n            throw new TypeError('@@toPrimitive must return a primitive value.');\n        }\n        return (hint === 'string' ? String : Number)(input);\n    }\n    function _toPropertyKey(arg) {\n        var key = _toPrimitive(arg, 'string');\n        return typeof key === 'symbol' ? key : String(key);\n    }\n    function _initializerWarningHelper(descriptor, context) {\n        throw new Error('Decorating class property failed. Please ensure that ' +\n            'proposal-class-properties is enabled and set to use loose mode. ' +\n            'To use proposal-class-properties in spec mode with decorators, wait for ' +\n            'the next major version of decorators in stage 2.');\n    }\n    function _initializerDefineProperty(target, property, descriptor, context) {\n        if (!descriptor)\n            return;\n        Object.defineProperty(target, property, {\n            enumerable: descriptor.enumerable,\n            configurable: descriptor.configurable,\n            writable: descriptor.writable,\n            value: descriptor.initializer\n                ? descriptor.initializer.call(context)\n                : void 0\n        });\n    }\n    function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n        var desc = {};\n        Object.keys(descriptor).forEach(function (key) {\n            desc[key] = descriptor[key];\n        });\n        desc.enumerable = !!desc.enumerable;\n        desc.configurable = !!desc.configurable;\n        if ('value' in desc || desc.initializer) {\n            desc.writable = true;\n        }\n        desc = decorators\n            .slice()\n            .reverse()\n            .reduce(function (desc, decorator) {\n            return decorator(target, property, desc) || desc;\n        }, desc);\n        if (context && desc.initializer !== void 0) {\n            desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n            desc.initializer = undefined;\n        }\n        if (desc.initializer === void 0) {\n            Object.defineProperty(target, property, desc);\n            desc = null;\n        }\n        return desc;\n    }\n    var id = 0;\n    function _classPrivateFieldLooseKey(name) {\n        return '__private_' + id++ + '_' + name;\n    }\n    function _classPrivateFieldLooseBase(receiver, privateKey) {\n        if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n            throw new TypeError('attempted to use private field on non-instance');\n        }\n        return receiver;\n    }\n    function _classPrivateFieldGet(receiver, privateMap) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n        var descriptor = privateMap.get(receiver);\n        if (descriptor.get) {\n            return descriptor.get.call(receiver);\n        }\n        return descriptor.value;\n    }\n    function _classPrivateFieldSet(receiver, privateMap, value) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError('attempted to set private field on non-instance');\n        }\n        var descriptor = privateMap.get(receiver);\n        if (descriptor.set) {\n            descriptor.set.call(receiver, value);\n        }\n        else {\n            if (!descriptor.writable) {\n                throw new TypeError('attempted to set read only private field');\n            }\n            descriptor.value = value;\n        }\n        return value;\n    }\n    function _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n        return descriptor.value;\n    }\n    function _classStaticPrivateFieldSpecSet(receiver, classConstructor, descriptor, value) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n        if (!descriptor.writable) {\n            throw new TypeError('attempted to set read only private field');\n        }\n        descriptor.value = value;\n        return value;\n    }\n    function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n        return method;\n    }\n    function _classStaticPrivateMethodSet() {\n        throw new TypeError('attempted to set read only static private field');\n    }\n    function _decorate(decorators, factory, superClass, mixins) {\n        var api = _getDecoratorsApi();\n        if (mixins) {\n            for (var i = 0; i < mixins.length; i++) {\n                api = mixins[i](api);\n            }\n        }\n        var r = factory(function initialize(O) {\n            api.initializeInstanceElements(O, decorated.elements);\n        }, superClass);\n        var decorated = api.decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators);\n        api.initializeClassElements(r.F, decorated.elements);\n        return api.runClassFinishers(r.F, decorated.finishers);\n    }\n    function _getDecoratorsApi() {\n        _getDecoratorsApi = function () {\n            return api;\n        };\n        var api = {\n            elementsDefinitionOrder: [['method'], ['field']],\n            initializeInstanceElements: function (O, elements) {\n                ['method', 'field'].forEach(function (kind) {\n                    elements.forEach(function (element) {\n                        if (element.kind === kind && element.placement === 'own') {\n                            this.defineClassElement(O, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            initializeClassElements: function (F, elements) {\n                var proto = F.prototype;\n                ['method', 'field'].forEach(function (kind) {\n                    elements.forEach(function (element) {\n                        var placement = element.placement;\n                        if (element.kind === kind &&\n                            (placement === 'static' || placement === 'prototype')) {\n                            var receiver = placement === 'static' ? F : proto;\n                            this.defineClassElement(receiver, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            defineClassElement: function (receiver, element) {\n                var descriptor = element.descriptor;\n                if (element.kind === 'field') {\n                    var initializer = element.initializer;\n                    descriptor = {\n                        enumerable: descriptor.enumerable,\n                        writable: descriptor.writable,\n                        configurable: descriptor.configurable,\n                        value: initializer === void 0 ? void 0 : initializer.call(receiver)\n                    };\n                }\n                Object.defineProperty(receiver, element.key, descriptor);\n            },\n            decorateClass: function (elements, decorators) {\n                var newElements = [];\n                var finishers = [];\n                var placements = {\n                    static: [],\n                    prototype: [],\n                    own: []\n                };\n                elements.forEach(function (element) {\n                    this.addElementPlacement(element, placements);\n                }, this);\n                elements.forEach(function (element) {\n                    if (!_hasDecorators(element))\n                        return newElements.push(element);\n                    var elementFinishersExtras = this.decorateElement(element, placements);\n                    newElements.push(elementFinishersExtras.element);\n                    newElements.push.apply(newElements, elementFinishersExtras.extras);\n                    finishers.push.apply(finishers, elementFinishersExtras.finishers);\n                }, this);\n                if (!decorators) {\n                    return {\n                        elements: newElements,\n                        finishers: finishers\n                    };\n                }\n                var result = this.decorateConstructor(newElements, decorators);\n                finishers.push.apply(finishers, result.finishers);\n                result.finishers = finishers;\n                return result;\n            },\n            addElementPlacement: function (element, placements, silent) {\n                var keys = placements[element.placement];\n                if (!silent && keys.indexOf(element.key) !== -1) {\n                    throw new TypeError('Duplicated element (' + element.key + ')');\n                }\n                keys.push(element.key);\n            },\n            decorateElement: function (element, placements) {\n                var extras = [];\n                var finishers = [];\n                for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) {\n                    var keys = placements[element.placement];\n                    keys.splice(keys.indexOf(element.key), 1);\n                    var elementObject = this.fromElementDescriptor(element);\n                    var elementFinisherExtras = this.toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject);\n                    element = elementFinisherExtras.element;\n                    this.addElementPlacement(element, placements);\n                    if (elementFinisherExtras.finisher) {\n                        finishers.push(elementFinisherExtras.finisher);\n                    }\n                    var newExtras = elementFinisherExtras.extras;\n                    if (newExtras) {\n                        for (var j = 0; j < newExtras.length; j++) {\n                            this.addElementPlacement(newExtras[j], placements);\n                        }\n                        extras.push.apply(extras, newExtras);\n                    }\n                }\n                return {\n                    element: element,\n                    finishers: finishers,\n                    extras: extras\n                };\n            },\n            decorateConstructor: function (elements, decorators) {\n                var finishers = [];\n                for (var i = decorators.length - 1; i >= 0; i--) {\n                    var obj = this.fromClassDescriptor(elements);\n                    var elementsAndFinisher = this.toClassDescriptor((0, decorators[i])(obj) || obj);\n                    if (elementsAndFinisher.finisher !== undefined) {\n                        finishers.push(elementsAndFinisher.finisher);\n                    }\n                    if (elementsAndFinisher.elements !== undefined) {\n                        elements = elementsAndFinisher.elements;\n                        for (var j = 0; j < elements.length - 1; j++) {\n                            for (var k = j + 1; k < elements.length; k++) {\n                                if (elements[j].key === elements[k].key &&\n                                    elements[j].placement === elements[k].placement) {\n                                    throw new TypeError('Duplicated element (' + elements[j].key + ')');\n                                }\n                            }\n                        }\n                    }\n                }\n                return {\n                    elements: elements,\n                    finishers: finishers\n                };\n            },\n            fromElementDescriptor: function (element) {\n                var obj = {\n                    kind: element.kind,\n                    key: element.key,\n                    placement: element.placement,\n                    descriptor: element.descriptor\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                if (element.kind === 'field')\n                    obj.initializer = element.initializer;\n                return obj;\n            },\n            toElementDescriptors: function (elementObjects) {\n                if (elementObjects === undefined)\n                    return;\n                return _toArray(elementObjects).map(function (elementObject) {\n                    var element = this.toElementDescriptor(elementObject);\n                    this.disallowProperty(elementObject, 'finisher', 'An element descriptor');\n                    this.disallowProperty(elementObject, 'extras', 'An element descriptor');\n                    return element;\n                }, this);\n            },\n            toElementDescriptor: function (elementObject) {\n                var kind = String(elementObject.kind);\n                if (kind !== 'method' && kind !== 'field') {\n                    throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or' +\n                        ' \"field\", but a decorator created an element descriptor with' +\n                        ' .kind \"' +\n                        kind +\n                        '\"');\n                }\n                var key = _toPropertyKey(elementObject.key);\n                var placement = String(elementObject.placement);\n                if (placement !== 'static' &&\n                    placement !== 'prototype' &&\n                    placement !== 'own') {\n                    throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\",' +\n                        ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n                        ' with .placement \"' +\n                        placement +\n                        '\"');\n                }\n                var descriptor = elementObject.descriptor;\n                this.disallowProperty(elementObject, 'elements', 'An element descriptor');\n                var element = {\n                    kind: kind,\n                    key: key,\n                    placement: placement,\n                    descriptor: Object.assign({}, descriptor)\n                };\n                if (kind !== 'field') {\n                    this.disallowProperty(elementObject, 'initializer', 'A method descriptor');\n                }\n                else {\n                    this.disallowProperty(descriptor, 'get', 'The property descriptor of a field descriptor');\n                    this.disallowProperty(descriptor, 'set', 'The property descriptor of a field descriptor');\n                    this.disallowProperty(descriptor, 'value', 'The property descriptor of a field descriptor');\n                    element.initializer = elementObject.initializer;\n                }\n                return element;\n            },\n            toElementFinisherExtras: function (elementObject) {\n                var element = this.toElementDescriptor(elementObject);\n                var finisher = _optionalCallableProperty(elementObject, 'finisher');\n                var extras = this.toElementDescriptors(elementObject.extras);\n                return {\n                    element: element,\n                    finisher: finisher,\n                    extras: extras\n                };\n            },\n            fromClassDescriptor: function (elements) {\n                var obj = {\n                    kind: 'class',\n                    elements: elements.map(this.fromElementDescriptor, this)\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                return obj;\n            },\n            toClassDescriptor: function (obj) {\n                var kind = String(obj.kind);\n                if (kind !== 'class') {\n                    throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n                        ' created a class descriptor with .kind \"' +\n                        kind +\n                        '\"');\n                }\n                this.disallowProperty(obj, 'key', 'A class descriptor');\n                this.disallowProperty(obj, 'placement', 'A class descriptor');\n                this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n                this.disallowProperty(obj, 'initializer', 'A class descriptor');\n                this.disallowProperty(obj, 'extras', 'A class descriptor');\n                var finisher = _optionalCallableProperty(obj, 'finisher');\n                var elements = this.toElementDescriptors(obj.elements);\n                return {\n                    elements: elements,\n                    finisher: finisher\n                };\n            },\n            runClassFinishers: function (constructor, finishers) {\n                for (var i = 0; i < finishers.length; i++) {\n                    var newConstructor = (0, finishers[i])(constructor);\n                    if (newConstructor !== undefined) {\n                        if (typeof newConstructor !== 'function') {\n                            throw new TypeError('Finishers must return a constructor.');\n                        }\n                        constructor = newConstructor;\n                    }\n                }\n                return constructor;\n            },\n            disallowProperty: function (obj, name, objectType) {\n                if (obj[name] !== undefined) {\n                    throw new TypeError(objectType + \" can't have a .\" + name + ' property.');\n                }\n            }\n        };\n        return api;\n    }\n    function _createElementDescriptor(def) {\n        var key = _toPropertyKey(def.key);\n        var descriptor;\n        if (def.kind === 'method') {\n            descriptor = {\n                value: def.value,\n                writable: true,\n                configurable: true,\n                enumerable: false\n            };\n        }\n        else if (def.kind === 'get') {\n            descriptor = {\n                get: def.value,\n                configurable: true,\n                enumerable: false\n            };\n        }\n        else if (def.kind === 'set') {\n            descriptor = {\n                set: def.value,\n                configurable: true,\n                enumerable: false\n            };\n        }\n        else if (def.kind === 'field') {\n            descriptor = {\n                configurable: true,\n                writable: true,\n                enumerable: true\n            };\n        }\n        var element = {\n            kind: def.kind === 'field' ? 'field' : 'method',\n            key: key,\n            placement: def.static\n                ? 'static'\n                : def.kind === 'field'\n                    ? 'own'\n                    : 'prototype',\n            descriptor: descriptor\n        };\n        if (def.decorators)\n            element.decorators = def.decorators;\n        if (def.kind === 'field')\n            element.initializer = def.value;\n        return element;\n    }\n    function _coalesceGetterSetter(element, other) {\n        if (element.descriptor.get !== undefined) {\n            other.descriptor.get = element.descriptor.get;\n        }\n        else {\n            other.descriptor.set = element.descriptor.set;\n        }\n    }\n    function _coalesceClassElements(elements) {\n        var newElements = [];\n        var isSameElement = function (other) {\n            return (other.kind === 'method' &&\n                other.key === element.key &&\n                other.placement === element.placement);\n        };\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var other;\n            if (element.kind === 'method' &&\n                (other = newElements.find(isSameElement))) {\n                if (_isDataDescriptor(element.descriptor) ||\n                    _isDataDescriptor(other.descriptor)) {\n                    if (_hasDecorators(element) || _hasDecorators(other)) {\n                        throw new ReferenceError('Duplicated methods (' + element.key + \") can't be decorated.\");\n                    }\n                    other.descriptor = element.descriptor;\n                }\n                else {\n                    if (_hasDecorators(element)) {\n                        if (_hasDecorators(other)) {\n                            throw new ReferenceError(\"Decorators can't be placed on different accessors with for \" +\n                                'the same property (' +\n                                element.key +\n                                ').');\n                        }\n                        other.decorators = element.decorators;\n                    }\n                    _coalesceGetterSetter(element, other);\n                }\n            }\n            else {\n                newElements.push(element);\n            }\n        }\n        return newElements;\n    }\n    function _hasDecorators(element) {\n        return element.decorators && element.decorators.length;\n    }\n    function _isDataDescriptor(desc) {\n        return (desc !== undefined &&\n            !(desc.value === undefined && desc.writable === undefined));\n    }\n    function _optionalCallableProperty(obj, name) {\n        var value = obj[name];\n        if (value !== undefined && typeof value !== 'function') {\n            throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n        }\n        return value;\n    }\n    function _classPrivateMethodGet(receiver, privateSet, fn) {\n        if (!privateSet.has(receiver)) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n        return fn;\n    }\n    function _classPrivateMethodSet() {\n        throw new TypeError('attempted to reassign private method');\n    }\n    function _wrapRegExp(re, groups) {\n        _wrapRegExp = function (re, groups) {\n            return new BabelRegExp(re, groups);\n        };\n        var _RegExp = _wrapNativeSuper(RegExp);\n        var _super = RegExp.prototype;\n        var _groups = new WeakMap();\n        function BabelRegExp(re, groups) {\n            var _this = _RegExp.call(this, re);\n            _groups.set(_this, groups);\n            return _this;\n        }\n        _inherits(BabelRegExp, _RegExp);\n        BabelRegExp.prototype.exec = function (str) {\n            var result = _super.exec.call(this, str);\n            if (result)\n                result.groups = buildGroups(result, this);\n            return result;\n        };\n        BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n            if (typeof substitution === 'string') {\n                var groups = _groups.get(this);\n                return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n                    return '$' + groups[name];\n                }));\n            }\n            else if (typeof substitution === 'function') {\n                var _this = this;\n                return _super[Symbol.replace].call(this, str, function () {\n                    var args = [];\n                    args.push.apply(args, arguments);\n                    if (typeof args[args.length - 1] !== 'object') {\n                        args.push(buildGroups(args, _this));\n                    }\n                    return substitution.apply(this, args);\n                });\n            }\n            else {\n                return _super[Symbol.replace].call(this, str, substitution);\n            }\n        };\n        function buildGroups(result, re) {\n            var g = _groups.get(re);\n            return Object.keys(g).reduce(function (groups, name) {\n                groups[name] = result[g[name]];\n                return groups;\n            }, Object.create(null));\n        }\n        return _wrapRegExp.apply(this, arguments);\n    }\n    var vectorMultiply = function vectorMultiply(v, amount) {\n        return createVector(v.x * amount, v.y * amount);\n    };\n    var vectorAdd = function vectorAdd(a, b) {\n        return createVector(a.x + b.x, a.y + b.y);\n    };\n    var vectorNormalize = function vectorNormalize(v) {\n        var l = Math.sqrt(v.x * v.x + v.y * v.y);\n        if (l === 0) {\n            return {\n                x: 0,\n                y: 0\n            };\n        }\n        return createVector(v.x / l, v.y / l);\n    };\n    var vectorRotate = function vectorRotate(v, radians, origin) {\n        var cos = Math.cos(radians);\n        var sin = Math.sin(radians);\n        var t = createVector(v.x - origin.x, v.y - origin.y);\n        return createVector(origin.x + cos * t.x - sin * t.y, origin.y + sin * t.x + cos * t.y);\n    };\n    var createVector = function createVector() {\n        var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        return { x: x, y: y };\n    };\n    var getMarkupValue = function getMarkupValue(value, size) {\n        var scalar = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n        var axis = arguments.length > 3 ? arguments[3] : undefined;\n        if (typeof value === 'string') {\n            return parseFloat(value) * scalar;\n        }\n        if (typeof value === 'number') {\n            return value * (axis ? size[axis] : Math.min(size.width, size.height));\n        }\n        return;\n    };\n    var getMarkupStyles = function getMarkupStyles(markup, size, scale) {\n        var lineStyle = markup.borderStyle || markup.lineStyle || 'solid';\n        var fill = markup.backgroundColor || markup.fontColor || 'transparent';\n        var stroke = markup.borderColor || markup.lineColor || 'transparent';\n        var strokeWidth = getMarkupValue(markup.borderWidth || markup.lineWidth, size, scale);\n        var lineCap = markup.lineCap || 'round';\n        var lineJoin = markup.lineJoin || 'round';\n        var dashes = typeof lineStyle === 'string'\n            ? ''\n            : lineStyle\n                .map(function (v) {\n                return getMarkupValue(v, size, scale);\n            })\n                .join(',');\n        var opacity = markup.opacity || 1;\n        return {\n            'stroke-linecap': lineCap,\n            'stroke-linejoin': lineJoin,\n            'stroke-width': strokeWidth || 0,\n            'stroke-dasharray': dashes,\n            stroke: stroke,\n            fill: fill,\n            opacity: opacity\n        };\n    };\n    var isDefined = function isDefined(value) {\n        return value != null;\n    };\n    var getMarkupRect = function getMarkupRect(rect, size) {\n        var scalar = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n        var left = getMarkupValue(rect.x, size, scalar, 'width') ||\n            getMarkupValue(rect.left, size, scalar, 'width');\n        var top = getMarkupValue(rect.y, size, scalar, 'height') ||\n            getMarkupValue(rect.top, size, scalar, 'height');\n        var width = getMarkupValue(rect.width, size, scalar, 'width');\n        var height = getMarkupValue(rect.height, size, scalar, 'height');\n        var right = getMarkupValue(rect.right, size, scalar, 'width');\n        var bottom = getMarkupValue(rect.bottom, size, scalar, 'height');\n        if (!isDefined(top)) {\n            if (isDefined(height) && isDefined(bottom)) {\n                top = size.height - height - bottom;\n            }\n            else {\n                top = bottom;\n            }\n        }\n        if (!isDefined(left)) {\n            if (isDefined(width) && isDefined(right)) {\n                left = size.width - width - right;\n            }\n            else {\n                left = right;\n            }\n        }\n        if (!isDefined(width)) {\n            if (isDefined(left) && isDefined(right)) {\n                width = size.width - left - right;\n            }\n            else {\n                width = 0;\n            }\n        }\n        if (!isDefined(height)) {\n            if (isDefined(top) && isDefined(bottom)) {\n                height = size.height - top - bottom;\n            }\n            else {\n                height = 0;\n            }\n        }\n        return {\n            x: left || 0,\n            y: top || 0,\n            width: width || 0,\n            height: height || 0\n        };\n    };\n    var pointsToPathShape = function pointsToPathShape(points) {\n        return points\n            .map(function (point, index) {\n            return ''\n                .concat(index === 0 ? 'M' : 'L', ' ')\n                .concat(point.x, ' ')\n                .concat(point.y);\n        })\n            .join(' ');\n    };\n    var setAttributes = function setAttributes(element, attr) {\n        return Object.keys(attr).forEach(function (key) {\n            return element.setAttribute(key, attr[key]);\n        });\n    };\n    var ns = 'http://www.w3.org/2000/svg';\n    var svg = function svg(tag, attr) {\n        var element = document.createElementNS(ns, tag);\n        if (attr) {\n            setAttributes(element, attr);\n        }\n        return element;\n    };\n    var updateRect = function updateRect(element) {\n        return setAttributes(element, Object.assign({}, element.rect, element.styles));\n    };\n    var updateEllipse = function updateEllipse(element) {\n        var cx = element.rect.x + element.rect.width * 0.5;\n        var cy = element.rect.y + element.rect.height * 0.5;\n        var rx = element.rect.width * 0.5;\n        var ry = element.rect.height * 0.5;\n        return setAttributes(element, Object.assign({\n            cx: cx,\n            cy: cy,\n            rx: rx,\n            ry: ry\n        }, element.styles));\n    };\n    var IMAGE_FIT_STYLE = {\n        contain: 'xMidYMid meet',\n        cover: 'xMidYMid slice'\n    };\n    var updateImage = function updateImage(element, markup) {\n        setAttributes(element, Object.assign({}, element.rect, element.styles, {\n            preserveAspectRatio: IMAGE_FIT_STYLE[markup.fit] || 'none'\n        }));\n    };\n    var TEXT_ANCHOR = {\n        left: 'start',\n        center: 'middle',\n        right: 'end'\n    };\n    var updateText = function updateText(element, markup, size, scale) {\n        var fontSize = getMarkupValue(markup.fontSize, size, scale);\n        var fontFamily = markup.fontFamily || 'sans-serif';\n        var fontWeight = markup.fontWeight || 'normal';\n        var textAlign = TEXT_ANCHOR[markup.textAlign] || 'start';\n        setAttributes(element, Object.assign({}, element.rect, element.styles, {\n            'stroke-width': 0,\n            'font-weight': fontWeight,\n            'font-size': fontSize,\n            'font-family': fontFamily,\n            'text-anchor': textAlign\n        }));\n        // update text\n        if (element.text !== markup.text) {\n            element.text = markup.text;\n            element.textContent = markup.text.length ? markup.text : ' ';\n        }\n    };\n    var updateLine = function updateLine(element, markup, size, scale) {\n        setAttributes(element, Object.assign({}, element.rect, element.styles, {\n            fill: 'none'\n        }));\n        var line = element.childNodes[0];\n        var begin = element.childNodes[1];\n        var end = element.childNodes[2];\n        var origin = element.rect;\n        var target = {\n            x: element.rect.x + element.rect.width,\n            y: element.rect.y + element.rect.height\n        };\n        setAttributes(line, {\n            x1: origin.x,\n            y1: origin.y,\n            x2: target.x,\n            y2: target.y\n        });\n        if (!markup.lineDecoration)\n            return;\n        begin.style.display = 'none';\n        end.style.display = 'none';\n        var v = vectorNormalize({\n            x: target.x - origin.x,\n            y: target.y - origin.y\n        });\n        var l = getMarkupValue(0.05, size, scale);\n        if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n            var arrowBeginRotationPoint = vectorMultiply(v, l);\n            var arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n            var arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n            var arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n            setAttributes(begin, {\n                style: 'display:block;',\n                d: 'M'\n                    .concat(arrowBeginA.x, ',')\n                    .concat(arrowBeginA.y, ' L')\n                    .concat(origin.x, ',')\n                    .concat(origin.y, ' L')\n                    .concat(arrowBeginB.x, ',')\n                    .concat(arrowBeginB.y)\n            });\n        }\n        if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n            var arrowEndRotationPoint = vectorMultiply(v, -l);\n            var arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n            var arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n            var arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n            setAttributes(end, {\n                style: 'display:block;',\n                d: 'M'\n                    .concat(arrowEndA.x, ',')\n                    .concat(arrowEndA.y, ' L')\n                    .concat(target.x, ',')\n                    .concat(target.y, ' L')\n                    .concat(arrowEndB.x, ',')\n                    .concat(arrowEndB.y)\n            });\n        }\n    };\n    var updatePath = function updatePath(element, markup, size, scale) {\n        setAttributes(element, Object.assign({}, element.styles, {\n            fill: 'none',\n            d: pointsToPathShape(markup.points.map(function (point) {\n                return {\n                    x: getMarkupValue(point.x, size, scale, 'width'),\n                    y: getMarkupValue(point.y, size, scale, 'height')\n                };\n            }))\n        }));\n    };\n    var createShape = function createShape(node) {\n        return function (markup) {\n            return svg(node, { id: markup.id });\n        };\n    };\n    var createImage = function createImage(markup) {\n        var shape = svg('image', {\n            id: markup.id,\n            'stroke-linecap': 'round',\n            'stroke-linejoin': 'round',\n            opacity: '0'\n        });\n        shape.onload = function () {\n            shape.setAttribute('opacity', markup.opacity || 1);\n        };\n        shape.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', markup.src);\n        return shape;\n    };\n    var createLine = function createLine(markup) {\n        var shape = svg('g', {\n            id: markup.id,\n            'stroke-linecap': 'round',\n            'stroke-linejoin': 'round'\n        });\n        var line = svg('line');\n        shape.appendChild(line);\n        var begin = svg('path');\n        shape.appendChild(begin);\n        var end = svg('path');\n        shape.appendChild(end);\n        return shape;\n    };\n    var CREATE_TYPE_ROUTES = {\n        image: createImage,\n        rect: createShape('rect'),\n        ellipse: createShape('ellipse'),\n        text: createShape('text'),\n        path: createShape('path'),\n        line: createLine\n    };\n    var UPDATE_TYPE_ROUTES = {\n        rect: updateRect,\n        ellipse: updateEllipse,\n        image: updateImage,\n        text: updateText,\n        path: updatePath,\n        line: updateLine\n    };\n    var createMarkupByType = function createMarkupByType(type, markup) {\n        return CREATE_TYPE_ROUTES[type](markup);\n    };\n    var updateMarkupByType = function updateMarkupByType(element, type, markup, size, scale) {\n        if (type !== 'path') {\n            element.rect = getMarkupRect(markup, size, scale);\n        }\n        element.styles = getMarkupStyles(markup, size, scale);\n        UPDATE_TYPE_ROUTES[type](element, markup, size, scale);\n    };\n    var MARKUP_RECT = [\n        'x',\n        'y',\n        'left',\n        'top',\n        'right',\n        'bottom',\n        'width',\n        'height'\n    ];\n    var toOptionalFraction = function toOptionalFraction(value) {\n        return typeof value === 'string' && /%/.test(value)\n            ? parseFloat(value) / 100\n            : value;\n    };\n    // adds default markup properties, clones markup\n    var prepareMarkup = function prepareMarkup(markup) {\n        var _markup = _slicedToArray(markup, 2), type = _markup[0], props = _markup[1];\n        var rect = props.points\n            ? {}\n            : MARKUP_RECT.reduce(function (prev, curr) {\n                prev[curr] = toOptionalFraction(props[curr]);\n                return prev;\n            }, {});\n        return [\n            type,\n            Object.assign({\n                zIndex: 0\n            }, props, rect)\n        ];\n    };\n    var sortMarkupByZIndex = function sortMarkupByZIndex(a, b) {\n        if (a[1].zIndex > b[1].zIndex) {\n            return 1;\n        }\n        if (a[1].zIndex < b[1].zIndex) {\n            return -1;\n        }\n        return 0;\n    };\n    var createMarkupView = function createMarkupView(_) {\n        return _.utils.createView({\n            name: 'image-preview-markup',\n            tag: 'svg',\n            ignoreRect: true,\n            mixins: {\n                apis: ['width', 'height', 'crop', 'markup', 'resize', 'dirty']\n            },\n            write: function write(_ref) {\n                var root = _ref.root, props = _ref.props;\n                if (!props.dirty)\n                    return;\n                var crop = props.crop, resize = props.resize, markup = props.markup;\n                var viewWidth = props.width;\n                var viewHeight = props.height;\n                var cropWidth = crop.width;\n                var cropHeight = crop.height;\n                if (resize) {\n                    var _size = resize.size;\n                    var outputWidth = _size && _size.width;\n                    var outputHeight = _size && _size.height;\n                    var outputFit = resize.mode;\n                    var outputUpscale = resize.upscale;\n                    if (outputWidth && !outputHeight)\n                        outputHeight = outputWidth;\n                    if (outputHeight && !outputWidth)\n                        outputWidth = outputHeight;\n                    var shouldUpscale = cropWidth < outputWidth && cropHeight < outputHeight;\n                    if (!shouldUpscale || (shouldUpscale && outputUpscale)) {\n                        var scalarWidth = outputWidth / cropWidth;\n                        var scalarHeight = outputHeight / cropHeight;\n                        if (outputFit === 'force') {\n                            cropWidth = outputWidth;\n                            cropHeight = outputHeight;\n                        }\n                        else {\n                            var scalar;\n                            if (outputFit === 'cover') {\n                                scalar = Math.max(scalarWidth, scalarHeight);\n                            }\n                            else if (outputFit === 'contain') {\n                                scalar = Math.min(scalarWidth, scalarHeight);\n                            }\n                            cropWidth = cropWidth * scalar;\n                            cropHeight = cropHeight * scalar;\n                        }\n                    }\n                }\n                var size = {\n                    width: viewWidth,\n                    height: viewHeight\n                };\n                root.element.setAttribute('width', size.width);\n                root.element.setAttribute('height', size.height);\n                var scale = Math.min(viewWidth / cropWidth, viewHeight / cropHeight);\n                // clear\n                root.element.innerHTML = '';\n                // get filter\n                var markupFilter = root.query('GET_IMAGE_PREVIEW_MARKUP_FILTER');\n                // draw new\n                markup\n                    .filter(markupFilter)\n                    .map(prepareMarkup)\n                    .sort(sortMarkupByZIndex)\n                    .forEach(function (markup) {\n                    var _markup = _slicedToArray(markup, 2), type = _markup[0], settings = _markup[1];\n                    // create\n                    var element = createMarkupByType(type, settings);\n                    // update\n                    updateMarkupByType(element, type, settings, size, scale);\n                    // add\n                    root.element.appendChild(element);\n                });\n            }\n        });\n    };\n    var createVector$1 = function createVector(x, y) {\n        return { x: x, y: y };\n    };\n    var vectorDot = function vectorDot(a, b) {\n        return a.x * b.x + a.y * b.y;\n    };\n    var vectorSubtract = function vectorSubtract(a, b) {\n        return createVector$1(a.x - b.x, a.y - b.y);\n    };\n    var vectorDistanceSquared = function vectorDistanceSquared(a, b) {\n        return vectorDot(vectorSubtract(a, b), vectorSubtract(a, b));\n    };\n    var vectorDistance = function vectorDistance(a, b) {\n        return Math.sqrt(vectorDistanceSquared(a, b));\n    };\n    var getOffsetPointOnEdge = function getOffsetPointOnEdge(length, rotation) {\n        var a = length;\n        var A = 1.5707963267948966;\n        var B = rotation;\n        var C = 1.5707963267948966 - rotation;\n        var sinA = Math.sin(A);\n        var sinB = Math.sin(B);\n        var sinC = Math.sin(C);\n        var cosC = Math.cos(C);\n        var ratio = a / sinA;\n        var b = ratio * sinB;\n        var c = ratio * sinC;\n        return createVector$1(cosC * b, cosC * c);\n    };\n    var getRotatedRectSize = function getRotatedRectSize(rect, rotation) {\n        var w = rect.width;\n        var h = rect.height;\n        var hor = getOffsetPointOnEdge(w, rotation);\n        var ver = getOffsetPointOnEdge(h, rotation);\n        var tl = createVector$1(rect.x + Math.abs(hor.x), rect.y - Math.abs(hor.y));\n        var tr = createVector$1(rect.x + rect.width + Math.abs(ver.y), rect.y + Math.abs(ver.x));\n        var bl = createVector$1(rect.x - Math.abs(ver.y), rect.y + rect.height - Math.abs(ver.x));\n        return {\n            width: vectorDistance(tl, tr),\n            height: vectorDistance(tl, bl)\n        };\n    };\n    var calculateCanvasSize = function calculateCanvasSize(image, canvasAspectRatio) {\n        var zoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n        var imageAspectRatio = image.height / image.width;\n        // determine actual pixels on x and y axis\n        var canvasWidth = 1;\n        var canvasHeight = canvasAspectRatio;\n        var imgWidth = 1;\n        var imgHeight = imageAspectRatio;\n        if (imgHeight > canvasHeight) {\n            imgHeight = canvasHeight;\n            imgWidth = imgHeight / imageAspectRatio;\n        }\n        var scalar = Math.max(canvasWidth / imgWidth, canvasHeight / imgHeight);\n        var width = image.width / (zoom * scalar * imgWidth);\n        var height = width * canvasAspectRatio;\n        return {\n            width: width,\n            height: height\n        };\n    };\n    var getImageRectZoomFactor = function getImageRectZoomFactor(imageRect, cropRect, rotation, center) {\n        // calculate available space round image center position\n        var cx = center.x > 0.5 ? 1 - center.x : center.x;\n        var cy = center.y > 0.5 ? 1 - center.y : center.y;\n        var imageWidth = cx * 2 * imageRect.width;\n        var imageHeight = cy * 2 * imageRect.height;\n        // calculate rotated crop rectangle size\n        var rotatedCropSize = getRotatedRectSize(cropRect, rotation);\n        // calculate scalar required to fit image\n        return Math.max(rotatedCropSize.width / imageWidth, rotatedCropSize.height / imageHeight);\n    };\n    var getCenteredCropRect = function getCenteredCropRect(container, aspectRatio) {\n        var width = container.width;\n        var height = width * aspectRatio;\n        if (height > container.height) {\n            height = container.height;\n            width = height / aspectRatio;\n        }\n        var x = (container.width - width) * 0.5;\n        var y = (container.height - height) * 0.5;\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height\n        };\n    };\n    var getCurrentCropSize = function getCurrentCropSize(imageSize) {\n        var crop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var zoom = crop.zoom, rotation = crop.rotation, center = crop.center, aspectRatio = crop.aspectRatio;\n        if (!aspectRatio)\n            aspectRatio = imageSize.height / imageSize.width;\n        var canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n        var canvasCenter = {\n            x: canvasSize.width * 0.5,\n            y: canvasSize.height * 0.5\n        };\n        var stage = {\n            x: 0,\n            y: 0,\n            width: canvasSize.width,\n            height: canvasSize.height,\n            center: canvasCenter\n        };\n        var shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n        var stageZoomFactor = getImageRectZoomFactor(imageSize, getCenteredCropRect(stage, aspectRatio), rotation, shouldLimit ? center : { x: 0.5, y: 0.5 });\n        var scale = zoom * stageZoomFactor;\n        // start drawing\n        return {\n            widthFloat: canvasSize.width / scale,\n            heightFloat: canvasSize.height / scale,\n            width: Math.round(canvasSize.width / scale),\n            height: Math.round(canvasSize.height / scale)\n        };\n    };\n    var IMAGE_SCALE_SPRING_PROPS = {\n        type: 'spring',\n        stiffness: 0.5,\n        damping: 0.45,\n        mass: 10\n    };\n    // does horizontal and vertical flipping\n    var createBitmapView = function createBitmapView(_) {\n        return _.utils.createView({\n            name: 'image-bitmap',\n            ignoreRect: true,\n            mixins: { styles: ['scaleX', 'scaleY'] },\n            create: function create(_ref) {\n                var root = _ref.root, props = _ref.props;\n                root.appendChild(props.image);\n            }\n        });\n    };\n    // shifts and rotates image\n    var createImageCanvasWrapper = function createImageCanvasWrapper(_) {\n        return _.utils.createView({\n            name: 'image-canvas-wrapper',\n            tag: 'div',\n            ignoreRect: true,\n            mixins: {\n                apis: ['crop', 'width', 'height'],\n                styles: [\n                    'originX',\n                    'originY',\n                    'translateX',\n                    'translateY',\n                    'scaleX',\n                    'scaleY',\n                    'rotateZ'\n                ],\n                animations: {\n                    originX: IMAGE_SCALE_SPRING_PROPS,\n                    originY: IMAGE_SCALE_SPRING_PROPS,\n                    scaleX: IMAGE_SCALE_SPRING_PROPS,\n                    scaleY: IMAGE_SCALE_SPRING_PROPS,\n                    translateX: IMAGE_SCALE_SPRING_PROPS,\n                    translateY: IMAGE_SCALE_SPRING_PROPS,\n                    rotateZ: IMAGE_SCALE_SPRING_PROPS\n                }\n            },\n            create: function create(_ref2) {\n                var root = _ref2.root, props = _ref2.props;\n                props.width = props.image.width;\n                props.height = props.image.height;\n                root.ref.bitmap = root.appendChildView(root.createChildView(createBitmapView(_), { image: props.image }));\n            },\n            write: function write(_ref3) {\n                var root = _ref3.root, props = _ref3.props;\n                var flip = props.crop.flip;\n                var bitmap = root.ref.bitmap;\n                bitmap.scaleX = flip.horizontal ? -1 : 1;\n                bitmap.scaleY = flip.vertical ? -1 : 1;\n            }\n        });\n    };\n    // clips canvas to correct aspect ratio\n    var createClipView = function createClipView(_) {\n        return _.utils.createView({\n            name: 'image-clip',\n            tag: 'div',\n            ignoreRect: true,\n            mixins: {\n                apis: [\n                    'crop',\n                    'markup',\n                    'resize',\n                    'width',\n                    'height',\n                    'dirty',\n                    'background'\n                ],\n                styles: ['width', 'height', 'opacity'],\n                animations: {\n                    opacity: { type: 'tween', duration: 250 }\n                }\n            },\n            didWriteView: function didWriteView(_ref4) {\n                var root = _ref4.root, props = _ref4.props;\n                if (!props.background)\n                    return;\n                root.element.style.backgroundColor = props.background;\n            },\n            create: function create(_ref5) {\n                var root = _ref5.root, props = _ref5.props;\n                root.ref.image = root.appendChildView(root.createChildView(createImageCanvasWrapper(_), Object.assign({}, props)));\n                root.ref.createMarkup = function () {\n                    if (root.ref.markup)\n                        return;\n                    root.ref.markup = root.appendChildView(root.createChildView(createMarkupView(_), Object.assign({}, props)));\n                };\n                root.ref.destroyMarkup = function () {\n                    if (!root.ref.markup)\n                        return;\n                    root.removeChildView(root.ref.markup);\n                    root.ref.markup = null;\n                };\n                // set up transparency grid\n                var transparencyIndicator = root.query('GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR');\n                if (transparencyIndicator === null)\n                    return;\n                // grid pattern\n                if (transparencyIndicator === 'grid') {\n                    root.element.dataset.transparencyIndicator = transparencyIndicator;\n                }\n                // basic color\n                else {\n                    root.element.dataset.transparencyIndicator = 'color';\n                }\n            },\n            write: function write(_ref6) {\n                var root = _ref6.root, props = _ref6.props, shouldOptimize = _ref6.shouldOptimize;\n                var crop = props.crop, markup = props.markup, resize = props.resize, dirty = props.dirty, width = props.width, height = props.height;\n                root.ref.image.crop = crop;\n                var stage = {\n                    x: 0,\n                    y: 0,\n                    width: width,\n                    height: height,\n                    center: {\n                        x: width * 0.5,\n                        y: height * 0.5\n                    }\n                };\n                var image = {\n                    width: root.ref.image.width,\n                    height: root.ref.image.height\n                };\n                var origin = {\n                    x: crop.center.x * image.width,\n                    y: crop.center.y * image.height\n                };\n                var translation = {\n                    x: stage.center.x - image.width * crop.center.x,\n                    y: stage.center.y - image.height * crop.center.y\n                };\n                var rotation = Math.PI * 2 + (crop.rotation % (Math.PI * 2));\n                var cropAspectRatio = crop.aspectRatio || image.height / image.width;\n                var shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n                var stageZoomFactor = getImageRectZoomFactor(image, getCenteredCropRect(stage, cropAspectRatio), rotation, shouldLimit ? crop.center : { x: 0.5, y: 0.5 });\n                var scale = crop.zoom * stageZoomFactor;\n                // update markup view\n                if (markup && markup.length) {\n                    root.ref.createMarkup();\n                    root.ref.markup.width = width;\n                    root.ref.markup.height = height;\n                    root.ref.markup.resize = resize;\n                    root.ref.markup.dirty = dirty;\n                    root.ref.markup.markup = markup;\n                    root.ref.markup.crop = getCurrentCropSize(image, crop);\n                }\n                else if (root.ref.markup) {\n                    root.ref.destroyMarkup();\n                }\n                // update image view\n                var imageView = root.ref.image;\n                // don't update clip layout\n                if (shouldOptimize) {\n                    imageView.originX = null;\n                    imageView.originY = null;\n                    imageView.translateX = null;\n                    imageView.translateY = null;\n                    imageView.rotateZ = null;\n                    imageView.scaleX = null;\n                    imageView.scaleY = null;\n                    return;\n                }\n                imageView.originX = origin.x;\n                imageView.originY = origin.y;\n                imageView.translateX = translation.x;\n                imageView.translateY = translation.y;\n                imageView.rotateZ = rotation;\n                imageView.scaleX = scale;\n                imageView.scaleY = scale;\n            }\n        });\n    };\n    var createImageView = function createImageView(_) {\n        return _.utils.createView({\n            name: 'image-preview',\n            tag: 'div',\n            ignoreRect: true,\n            mixins: {\n                apis: ['image', 'crop', 'markup', 'resize', 'dirty', 'background'],\n                styles: ['translateY', 'scaleX', 'scaleY', 'opacity'],\n                animations: {\n                    scaleX: IMAGE_SCALE_SPRING_PROPS,\n                    scaleY: IMAGE_SCALE_SPRING_PROPS,\n                    translateY: IMAGE_SCALE_SPRING_PROPS,\n                    opacity: { type: 'tween', duration: 400 }\n                }\n            },\n            create: function create(_ref7) {\n                var root = _ref7.root, props = _ref7.props;\n                root.ref.clip = root.appendChildView(root.createChildView(createClipView(_), {\n                    id: props.id,\n                    image: props.image,\n                    crop: props.crop,\n                    markup: props.markup,\n                    resize: props.resize,\n                    dirty: props.dirty,\n                    background: props.background\n                }));\n            },\n            write: function write(_ref8) {\n                var root = _ref8.root, props = _ref8.props, shouldOptimize = _ref8.shouldOptimize;\n                var clip = root.ref.clip;\n                var image = props.image, crop = props.crop, markup = props.markup, resize = props.resize, dirty = props.dirty;\n                clip.crop = crop;\n                clip.markup = markup;\n                clip.resize = resize;\n                clip.dirty = dirty;\n                // don't update clip layout\n                clip.opacity = shouldOptimize ? 0 : 1;\n                // don't re-render if optimizing or hidden (width will be zero resulting in weird animations)\n                if (shouldOptimize || root.rect.element.hidden)\n                    return;\n                // calculate scaled preview image size\n                var imageAspectRatio = image.height / image.width;\n                var aspectRatio = crop.aspectRatio || imageAspectRatio;\n                // calculate container size\n                var containerWidth = root.rect.inner.width;\n                var containerHeight = root.rect.inner.height;\n                var fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n                var minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n                var maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n                var panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n                var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n                if (panelAspectRatio && !allowMultiple) {\n                    fixedPreviewHeight = containerWidth * panelAspectRatio;\n                    aspectRatio = panelAspectRatio;\n                }\n                // determine clip width and height\n                var clipHeight = fixedPreviewHeight !== null\n                    ? fixedPreviewHeight\n                    : Math.max(minPreviewHeight, Math.min(containerWidth * aspectRatio, maxPreviewHeight));\n                var clipWidth = clipHeight / aspectRatio;\n                if (clipWidth > containerWidth) {\n                    clipWidth = containerWidth;\n                    clipHeight = clipWidth * aspectRatio;\n                }\n                if (clipHeight > containerHeight) {\n                    clipHeight = containerHeight;\n                    clipWidth = containerHeight / aspectRatio;\n                }\n                clip.width = clipWidth;\n                clip.height = clipHeight;\n            }\n        });\n    };\n    var SVG_MASK = '<svg width=\"500\" height=\"200\" viewBox=\"0 0 500 200\" preserveAspectRatio=\"none\">\\n    <defs>\\n        <radialGradient id=\"gradient-__UID__\" cx=\".5\" cy=\"1.25\" r=\"1.15\">\\n            <stop offset=\\'50%\\' stop-color=\\'#000000\\'/>\\n            <stop offset=\\'56%\\' stop-color=\\'#0a0a0a\\'/>\\n            <stop offset=\\'63%\\' stop-color=\\'#262626\\'/>\\n            <stop offset=\\'69%\\' stop-color=\\'#4f4f4f\\'/>\\n            <stop offset=\\'75%\\' stop-color=\\'#808080\\'/>\\n            <stop offset=\\'81%\\' stop-color=\\'#b1b1b1\\'/>\\n            <stop offset=\\'88%\\' stop-color=\\'#dadada\\'/>\\n            <stop offset=\\'94%\\' stop-color=\\'#f6f6f6\\'/>\\n            <stop offset=\\'100%\\' stop-color=\\'#ffffff\\'/>\\n        </radialGradient>\\n        <mask id=\"mask-__UID__\">\\n            <rect x=\"0\" y=\"0\" width=\"500\" height=\"200\" fill=\"url(#gradient-__UID__)\"></rect>\\n        </mask>\\n    </defs>\\n    <rect x=\"0\" width=\"500\" height=\"200\" fill=\"currentColor\" mask=\"url(#mask-__UID__)\"></rect>\\n</svg>';\n    var checkedMyBases = false;\n    var SVGMaskUniqueId = 0;\n    var createImageOverlayView = function createImageOverlayView(fpAPI) {\n        return fpAPI.utils.createView({\n            name: 'image-preview-overlay',\n            tag: 'div',\n            ignoreRect: true,\n            create: function create(_ref) {\n                var root = _ref.root, props = _ref.props;\n                if (!checkedMyBases && document.querySelector('base')) {\n                    SVG_MASK = SVG_MASK.replace(/url\\(\\#/g, 'url(' +\n                        window.location.href.replace(window.location.hash, '') +\n                        '#');\n                    checkedMyBases = true;\n                }\n                SVGMaskUniqueId++;\n                root.element.classList.add('filepond--image-preview-overlay-'.concat(props.status));\n                root.element.innerHTML = SVG_MASK.replace(/__UID__/g, SVGMaskUniqueId);\n            },\n            mixins: {\n                styles: ['opacity'],\n                animations: {\n                    opacity: { type: 'spring', mass: 25 }\n                }\n            }\n        });\n    };\n    /**\n     * Bitmap Worker\n     */\n    var BitmapWorker = function BitmapWorker() {\n        self.onmessage = function (e) {\n            createImageBitmap(e.data.message.file).then(function (bitmap) {\n                self.postMessage({ id: e.data.id, message: bitmap }, [bitmap]);\n            });\n        };\n    };\n    /**\n     * ColorMatrix Worker\n     */\n    var ColorMatrixWorker = function ColorMatrixWorker() {\n        self.onmessage = function (e) {\n            var imageData = e.data.message.imageData;\n            var matrix = e.data.message.colorMatrix;\n            var data = imageData.data;\n            var l = data.length;\n            var m11 = matrix[0];\n            var m12 = matrix[1];\n            var m13 = matrix[2];\n            var m14 = matrix[3];\n            var m15 = matrix[4];\n            var m21 = matrix[5];\n            var m22 = matrix[6];\n            var m23 = matrix[7];\n            var m24 = matrix[8];\n            var m25 = matrix[9];\n            var m31 = matrix[10];\n            var m32 = matrix[11];\n            var m33 = matrix[12];\n            var m34 = matrix[13];\n            var m35 = matrix[14];\n            var m41 = matrix[15];\n            var m42 = matrix[16];\n            var m43 = matrix[17];\n            var m44 = matrix[18];\n            var m45 = matrix[19];\n            var index = 0, r = 0.0, g = 0.0, b = 0.0, a = 0.0;\n            for (; index < l; index += 4) {\n                r = data[index] / 255;\n                g = data[index + 1] / 255;\n                b = data[index + 2] / 255;\n                a = data[index + 3] / 255;\n                data[index] = Math.max(0, Math.min((r * m11 + g * m12 + b * m13 + a * m14 + m15) * 255, 255));\n                data[index + 1] = Math.max(0, Math.min((r * m21 + g * m22 + b * m23 + a * m24 + m25) * 255, 255));\n                data[index + 2] = Math.max(0, Math.min((r * m31 + g * m32 + b * m33 + a * m34 + m35) * 255, 255));\n                data[index + 3] = Math.max(0, Math.min((r * m41 + g * m42 + b * m43 + a * m44 + m45) * 255, 255));\n            }\n            self.postMessage({ id: e.data.id, message: imageData }, [\n                imageData.data.buffer\n            ]);\n        };\n    };\n    var getImageSize = function getImageSize(url, cb) {\n        var image = new Image();\n        image.onload = function () {\n            var width = image.naturalWidth;\n            var height = image.naturalHeight;\n            image = null;\n            cb(width, height);\n        };\n        image.src = url;\n    };\n    var transforms = {\n        1: function _() {\n            return [1, 0, 0, 1, 0, 0];\n        },\n        2: function _(width) {\n            return [-1, 0, 0, 1, width, 0];\n        },\n        3: function _(width, height) {\n            return [-1, 0, 0, -1, width, height];\n        },\n        4: function _(width, height) {\n            return [1, 0, 0, -1, 0, height];\n        },\n        5: function _() {\n            return [0, 1, 1, 0, 0, 0];\n        },\n        6: function _(width, height) {\n            return [0, 1, -1, 0, height, 0];\n        },\n        7: function _(width, height) {\n            return [0, -1, -1, 0, height, width];\n        },\n        8: function _(width) {\n            return [0, -1, 1, 0, 0, width];\n        }\n    };\n    var fixImageOrientation = function fixImageOrientation(ctx, width, height, orientation) {\n        // no orientation supplied\n        if (orientation === -1) {\n            return;\n        }\n        ctx.transform.apply(ctx, transforms[orientation](width, height));\n    };\n    // draws the preview image to canvas\n    var createPreviewImage = function createPreviewImage(data, width, height, orientation) {\n        // can't draw on half pixels\n        width = Math.round(width);\n        height = Math.round(height);\n        // draw image\n        var canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        var ctx = canvas.getContext('2d');\n        // if is rotated incorrectly swap width and height\n        if (orientation >= 5 && orientation <= 8) {\n            var _ref = [height, width];\n            width = _ref[0];\n            height = _ref[1];\n        }\n        // correct image orientation\n        fixImageOrientation(ctx, width, height, orientation);\n        // draw the image\n        ctx.drawImage(data, 0, 0, width, height);\n        return canvas;\n    };\n    var isBitmap = function isBitmap(file) {\n        return /^image/.test(file.type) && !/svg/.test(file.type);\n    };\n    var MAX_WIDTH = 10;\n    var MAX_HEIGHT = 10;\n    var calculateAverageColor = function calculateAverageColor(image) {\n        var scalar = Math.min(MAX_WIDTH / image.width, MAX_HEIGHT / image.height);\n        var canvas = document.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n        var width = (canvas.width = Math.ceil(image.width * scalar));\n        var height = (canvas.height = Math.ceil(image.height * scalar));\n        ctx.drawImage(image, 0, 0, width, height);\n        var data = null;\n        try {\n            data = ctx.getImageData(0, 0, width, height).data;\n        }\n        catch (e) {\n            return null;\n        }\n        var l = data.length;\n        var r = 0;\n        var g = 0;\n        var b = 0;\n        var i = 0;\n        for (; i < l; i += 4) {\n            r += data[i] * data[i];\n            g += data[i + 1] * data[i + 1];\n            b += data[i + 2] * data[i + 2];\n        }\n        r = averageColor(r, l);\n        g = averageColor(g, l);\n        b = averageColor(b, l);\n        return { r: r, g: g, b: b };\n    };\n    var averageColor = function averageColor(c, l) {\n        return Math.floor(Math.sqrt(c / (l / 4)));\n    };\n    var cloneCanvas = function cloneCanvas(origin, target) {\n        target = target || document.createElement('canvas');\n        target.width = origin.width;\n        target.height = origin.height;\n        var ctx = target.getContext('2d');\n        ctx.drawImage(origin, 0, 0);\n        return target;\n    };\n    var cloneImageData = function cloneImageData(imageData) {\n        var id;\n        try {\n            id = new ImageData(imageData.width, imageData.height);\n        }\n        catch (e) {\n            var canvas = document.createElement('canvas');\n            var ctx = canvas.getContext('2d');\n            id = ctx.createImageData(imageData.width, imageData.height);\n        }\n        id.data.set(new Uint8ClampedArray(imageData.data));\n        return id;\n    };\n    var loadImage = function loadImage(url) {\n        return new Promise(function (resolve, reject) {\n            var img = new Image();\n            img.crossOrigin = 'Anonymous';\n            img.onload = function () {\n                resolve(img);\n            };\n            img.onerror = function (e) {\n                reject(e);\n            };\n            img.src = url;\n        });\n    };\n    var createImageWrapperView = function createImageWrapperView(_) {\n        // create overlay view\n        var OverlayView = createImageOverlayView(_);\n        var ImageView = createImageView(_);\n        var createWorker = _.utils.createWorker;\n        var applyFilter = function applyFilter(root, filter, target) {\n            return new Promise(function (resolve) {\n                // will store image data for future filter updates\n                if (!root.ref.imageData) {\n                    root.ref.imageData = target\n                        .getContext('2d')\n                        .getImageData(0, 0, target.width, target.height);\n                }\n                // get image data reference\n                var imageData = cloneImageData(root.ref.imageData);\n                if (!filter || filter.length !== 20) {\n                    target.getContext('2d').putImageData(imageData, 0, 0);\n                    return resolve();\n                }\n                var worker = createWorker(ColorMatrixWorker);\n                worker.post({\n                    imageData: imageData,\n                    colorMatrix: filter\n                }, function (response) {\n                    // apply filtered colors\n                    target.getContext('2d').putImageData(response, 0, 0);\n                    // stop worker\n                    worker.terminate();\n                    // done!\n                    resolve();\n                }, [imageData.data.buffer]);\n            });\n        };\n        var removeImageView = function removeImageView(root, imageView) {\n            root.removeChildView(imageView);\n            imageView.image.width = 1;\n            imageView.image.height = 1;\n            imageView._destroy();\n        };\n        // remove an image\n        var shiftImage = function shiftImage(_ref) {\n            var root = _ref.root;\n            var imageView = root.ref.images.shift();\n            imageView.opacity = 0;\n            imageView.translateY = -15;\n            root.ref.imageViewBin.push(imageView);\n            return imageView;\n        };\n        // add new image\n        var pushImage = function pushImage(_ref2) {\n            var root = _ref2.root, props = _ref2.props, image = _ref2.image;\n            var id = props.id;\n            var item = root.query('GET_ITEM', { id: id });\n            if (!item)\n                return;\n            var crop = item.getMetadata('crop') || {\n                center: {\n                    x: 0.5,\n                    y: 0.5\n                },\n                flip: {\n                    horizontal: false,\n                    vertical: false\n                },\n                zoom: 1,\n                rotation: 0,\n                aspectRatio: null\n            };\n            var background = root.query('GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR');\n            var markup;\n            var resize;\n            var dirty = false;\n            if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n                markup = item.getMetadata('markup') || [];\n                resize = item.getMetadata('resize');\n                dirty = true;\n            }\n            // append image presenter\n            var imageView = root.appendChildView(root.createChildView(ImageView, {\n                id: id,\n                image: image,\n                crop: crop,\n                resize: resize,\n                markup: markup,\n                dirty: dirty,\n                background: background,\n                opacity: 0,\n                scaleX: 1.15,\n                scaleY: 1.15,\n                translateY: 15\n            }), root.childViews.length);\n            root.ref.images.push(imageView);\n            // reveal the preview image\n            imageView.opacity = 1;\n            imageView.scaleX = 1;\n            imageView.scaleY = 1;\n            imageView.translateY = 0;\n            // the preview is now ready to be drawn\n            setTimeout(function () {\n                root.dispatch('DID_IMAGE_PREVIEW_SHOW', { id: id });\n            }, 250);\n        };\n        var updateImage = function updateImage(_ref3) {\n            var root = _ref3.root, props = _ref3.props;\n            var item = root.query('GET_ITEM', { id: props.id });\n            if (!item)\n                return;\n            var imageView = root.ref.images[root.ref.images.length - 1];\n            imageView.crop = item.getMetadata('crop');\n            imageView.background = root.query('GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR');\n            if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n                imageView.dirty = true;\n                imageView.resize = item.getMetadata('resize');\n                imageView.markup = item.getMetadata('markup');\n            }\n        };\n        // replace image preview\n        var didUpdateItemMetadata = function didUpdateItemMetadata(_ref4) {\n            var root = _ref4.root, props = _ref4.props, action = _ref4.action;\n            // only filter and crop trigger redraw\n            if (!/crop|filter|markup|resize/.test(action.change.key))\n                return;\n            // no images to update, exit\n            if (!root.ref.images.length)\n                return;\n            // no item found, exit\n            var item = root.query('GET_ITEM', { id: props.id });\n            if (!item)\n                return;\n            // for now, update existing image when filtering\n            if (/filter/.test(action.change.key)) {\n                var imageView = root.ref.images[root.ref.images.length - 1];\n                applyFilter(root, action.change.value, imageView.image);\n                return;\n            }\n            if (/crop|markup|resize/.test(action.change.key)) {\n                var crop = item.getMetadata('crop');\n                var image = root.ref.images[root.ref.images.length - 1];\n                // if aspect ratio has changed, we need to create a new image\n                if (Math.abs(crop.aspectRatio - image.crop.aspectRatio) > 0.00001) {\n                    var _imageView = shiftImage({ root: root });\n                    pushImage({\n                        root: root,\n                        props: props,\n                        image: cloneCanvas(_imageView.image)\n                    });\n                }\n                // if not, we can update the current image\n                else {\n                    updateImage({ root: root, props: props });\n                }\n            }\n        };\n        var canCreateImageBitmap = function canCreateImageBitmap(file) {\n            // Firefox versions before 58 will freeze when running createImageBitmap\n            // in a Web Worker so we detect those versions and return false for support\n            var userAgent = window.navigator.userAgent;\n            var isFirefox = userAgent.match(/Firefox\\/([0-9]+)\\./);\n            var firefoxVersion = isFirefox ? parseInt(isFirefox[1]) : null;\n            if (firefoxVersion <= 58)\n                return false;\n            return 'createImageBitmap' in window && isBitmap(file);\n        };\n        /**\n         * Write handler for when preview container has been created\n         */\n        var didCreatePreviewContainer = function didCreatePreviewContainer(_ref5) {\n            var root = _ref5.root, props = _ref5.props;\n            var id = props.id;\n            // we need to get the file data to determine the eventual image size\n            var item = root.query('GET_ITEM', id);\n            if (!item)\n                return;\n            // get url to file (we'll revoke it later on when done)\n            var fileURL = URL.createObjectURL(item.file);\n            // determine image size of this item\n            getImageSize(fileURL, function (width, height) {\n                // we can now scale the panel to the final size\n                root.dispatch('DID_IMAGE_PREVIEW_CALCULATE_SIZE', {\n                    id: id,\n                    width: width,\n                    height: height\n                });\n            });\n        };\n        var drawPreview = function drawPreview(_ref6) {\n            var root = _ref6.root, props = _ref6.props;\n            var id = props.id;\n            // we need to get the file data to determine the eventual image size\n            var item = root.query('GET_ITEM', id);\n            if (!item)\n                return;\n            // get url to file (we'll revoke it later on when done)\n            var fileURL = URL.createObjectURL(item.file);\n            // fallback\n            var loadPreviewFallback = function loadPreviewFallback() {\n                // let's scale the image in the main thread :(\n                loadImage(fileURL).then(previewImageLoaded);\n            };\n            // image is now ready\n            var previewImageLoaded = function previewImageLoaded(imageData) {\n                // the file url is no longer needed\n                URL.revokeObjectURL(fileURL);\n                // draw the scaled down version here and use that as source so bitmapdata can be closed\n                // orientation info\n                var exif = item.getMetadata('exif') || {};\n                var orientation = exif.orientation || -1;\n                // get width and height from action, and swap if orientation is incorrect\n                var width = imageData.width, height = imageData.height;\n                // if no width or height, just return early.\n                if (!width || !height)\n                    return;\n                if (orientation >= 5 && orientation <= 8) {\n                    var _ref7 = [height, width];\n                    width = _ref7[0];\n                    height = _ref7[1];\n                }\n                // scale canvas based on pixel density\n                // we multiply by .75 as that creates smaller but still clear images on screens with high res displays\n                var pixelDensityFactor = Math.max(1, window.devicePixelRatio * 0.75);\n                // we want as much pixels to work with as possible,\n                // this multiplies the minimum image resolution,\n                // so when zooming in it doesn't get too blurry\n                var zoomFactor = root.query('GET_IMAGE_PREVIEW_ZOOM_FACTOR');\n                // imaeg scale factor\n                var scaleFactor = zoomFactor * pixelDensityFactor;\n                // calculate scaled preview image size\n                var previewImageRatio = height / width;\n                // calculate image preview height and width\n                var previewContainerWidth = root.rect.element.width;\n                var previewContainerHeight = root.rect.element.height;\n                var imageWidth = previewContainerWidth;\n                var imageHeight = imageWidth * previewImageRatio;\n                if (previewImageRatio > 1) {\n                    imageWidth = Math.min(width, previewContainerWidth * scaleFactor);\n                    imageHeight = imageWidth * previewImageRatio;\n                }\n                else {\n                    imageHeight = Math.min(height, previewContainerHeight * scaleFactor);\n                    imageWidth = imageHeight / previewImageRatio;\n                }\n                // transfer to image tag so no canvas memory wasted on iOS\n                var previewImage = createPreviewImage(imageData, imageWidth, imageHeight, orientation);\n                // done\n                var done = function done() {\n                    // calculate average image color, disabled for now\n                    var averageColor = root.query('GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR')\n                        ? calculateAverageColor(data)\n                        : null;\n                    item.setMetadata('color', averageColor, true);\n                    // data has been transferred to canvas ( if was ImageBitmap )\n                    if ('close' in imageData) {\n                        imageData.close();\n                    }\n                    // show the overlay\n                    root.ref.overlayShadow.opacity = 1;\n                    // create the first image\n                    pushImage({ root: root, props: props, image: previewImage });\n                };\n                // apply filter\n                var filter = item.getMetadata('filter');\n                if (filter) {\n                    applyFilter(root, filter, previewImage).then(done);\n                }\n                else {\n                    done();\n                }\n            };\n            // if we support scaling using createImageBitmap we use a worker\n            if (canCreateImageBitmap(item.file)) {\n                // let's scale the image in a worker\n                var worker = createWorker(BitmapWorker);\n                worker.post({\n                    file: item.file\n                }, function (imageBitmap) {\n                    // destroy worker\n                    worker.terminate();\n                    // no bitmap returned, must be something wrong,\n                    // try the oldschool way\n                    if (!imageBitmap) {\n                        loadPreviewFallback();\n                        return;\n                    }\n                    // yay we got our bitmap, let's continue showing the preview\n                    previewImageLoaded(imageBitmap);\n                });\n            }\n            else {\n                // create fallback preview\n                loadPreviewFallback();\n            }\n        };\n        /**\n         * Write handler for when the preview image is ready to be animated\n         */\n        var didDrawPreview = function didDrawPreview(_ref8) {\n            var root = _ref8.root;\n            // get last added image\n            var image = root.ref.images[root.ref.images.length - 1];\n            image.translateY = 0;\n            image.scaleX = 1.0;\n            image.scaleY = 1.0;\n            image.opacity = 1;\n        };\n        /**\n         * Write handler for when the preview has been loaded\n         */\n        var restoreOverlay = function restoreOverlay(_ref9) {\n            var root = _ref9.root;\n            root.ref.overlayShadow.opacity = 1;\n            root.ref.overlayError.opacity = 0;\n            root.ref.overlaySuccess.opacity = 0;\n        };\n        var didThrowError = function didThrowError(_ref10) {\n            var root = _ref10.root;\n            root.ref.overlayShadow.opacity = 0.25;\n            root.ref.overlayError.opacity = 1;\n        };\n        var didCompleteProcessing = function didCompleteProcessing(_ref11) {\n            var root = _ref11.root;\n            root.ref.overlayShadow.opacity = 0.25;\n            root.ref.overlaySuccess.opacity = 1;\n        };\n        /**\n         * Constructor\n         */\n        var create = function create(_ref12) {\n            var root = _ref12.root;\n            // image view\n            root.ref.images = [];\n            // the preview image data (we need this to filter the image)\n            root.ref.imageData = null;\n            // image bin\n            root.ref.imageViewBin = [];\n            // image overlays\n            root.ref.overlayShadow = root.appendChildView(root.createChildView(OverlayView, {\n                opacity: 0,\n                status: 'idle'\n            }));\n            root.ref.overlaySuccess = root.appendChildView(root.createChildView(OverlayView, {\n                opacity: 0,\n                status: 'success'\n            }));\n            root.ref.overlayError = root.appendChildView(root.createChildView(OverlayView, {\n                opacity: 0,\n                status: 'failure'\n            }));\n        };\n        return _.utils.createView({\n            name: 'image-preview-wrapper',\n            create: create,\n            styles: ['height'],\n            apis: ['height'],\n            destroy: function destroy(_ref13) {\n                var root = _ref13.root;\n                // we resize the image so memory on iOS 12 is released more quickly (it seems)\n                root.ref.images.forEach(function (imageView) {\n                    imageView.image.width = 1;\n                    imageView.image.height = 1;\n                });\n            },\n            didWriteView: function didWriteView(_ref14) {\n                var root = _ref14.root;\n                root.ref.images.forEach(function (imageView) {\n                    imageView.dirty = false;\n                });\n            },\n            write: _.utils.createRoute({\n                // image preview stated\n                DID_IMAGE_PREVIEW_DRAW: didDrawPreview,\n                DID_IMAGE_PREVIEW_CONTAINER_CREATE: didCreatePreviewContainer,\n                DID_FINISH_CALCULATE_PREVIEWSIZE: drawPreview,\n                DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata,\n                // file states\n                DID_THROW_ITEM_LOAD_ERROR: didThrowError,\n                DID_THROW_ITEM_PROCESSING_ERROR: didThrowError,\n                DID_THROW_ITEM_INVALID: didThrowError,\n                DID_COMPLETE_ITEM_PROCESSING: didCompleteProcessing,\n                DID_START_ITEM_PROCESSING: restoreOverlay,\n                DID_REVERT_ITEM_PROCESSING: restoreOverlay\n            }, function (_ref15) {\n                var root = _ref15.root;\n                // views on death row\n                var viewsToRemove = root.ref.imageViewBin.filter(function (imageView) {\n                    return imageView.opacity === 0;\n                });\n                // views to retain\n                root.ref.imageViewBin = root.ref.imageViewBin.filter(function (imageView) {\n                    return imageView.opacity > 0;\n                });\n                // remove these views\n                viewsToRemove.forEach(function (imageView) {\n                    return removeImageView(root, imageView);\n                });\n                viewsToRemove.length = 0;\n            })\n        });\n    };\n    /**\n     * Image Preview Plugin\n     */\n    var plugin = function plugin(fpAPI) {\n        var addFilter = fpAPI.addFilter, utils = fpAPI.utils;\n        var Type = utils.Type, createRoute = utils.createRoute, isFile = utils.isFile;\n        // imagePreviewView\n        var imagePreviewView = createImageWrapperView(fpAPI);\n        // called for each view that is created right after the 'create' method\n        addFilter('CREATE_VIEW', function (viewAPI) {\n            // get reference to created view\n            var is = viewAPI.is, view = viewAPI.view, query = viewAPI.query;\n            // only hook up to item view and only if is enabled for this cropper\n            if (!is('file') || !query('GET_ALLOW_IMAGE_PREVIEW'))\n                return;\n            // create the image preview plugin, but only do so if the item is an image\n            var didLoadItem = function didLoadItem(_ref) {\n                var root = _ref.root, props = _ref.props;\n                var id = props.id;\n                var item = query('GET_ITEM', id);\n                // item could theoretically have been removed in the mean time\n                if (!item || !isFile(item.file) || item.archived)\n                    return;\n                // get the file object\n                var file = item.file;\n                // exit if this is not an image\n                if (!isPreviewableImage(file))\n                    return;\n                // test if is filtered\n                if (!query('GET_IMAGE_PREVIEW_FILTER_ITEM')(item))\n                    return;\n                // exit if image size is too high and no createImageBitmap support\n                // this would simply bring the browser to its knees and that is not what we want\n                var supportsCreateImageBitmap = 'createImageBitmap' in (window || {});\n                var maxPreviewFileSize = query('GET_IMAGE_PREVIEW_MAX_FILE_SIZE');\n                if (!supportsCreateImageBitmap &&\n                    maxPreviewFileSize &&\n                    file.size > maxPreviewFileSize)\n                    return;\n                // set preview view\n                root.ref.imagePreview = view.appendChildView(view.createChildView(imagePreviewView, { id: id }));\n                // update height if is fixed\n                var fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n                if (fixedPreviewHeight) {\n                    root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n                        id: item.id,\n                        height: fixedPreviewHeight\n                    });\n                }\n                // now ready\n                var queue = !supportsCreateImageBitmap &&\n                    file.size > query('GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE');\n                root.dispatch('DID_IMAGE_PREVIEW_CONTAINER_CREATE', { id: id }, queue);\n            };\n            var rescaleItem = function rescaleItem(root, props) {\n                if (!root.ref.imagePreview)\n                    return;\n                var id = props.id;\n                // get item\n                var item = root.query('GET_ITEM', { id: id });\n                if (!item)\n                    return;\n                // if is fixed height or panel has aspect ratio, exit here, height has already been defined\n                var panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n                var itemPanelAspectRatio = root.query('GET_ITEM_PANEL_ASPECT_RATIO');\n                var fixedHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n                if (panelAspectRatio || itemPanelAspectRatio || fixedHeight)\n                    return;\n                // no data!\n                var _root$ref = root.ref, imageWidth = _root$ref.imageWidth, imageHeight = _root$ref.imageHeight;\n                if (!imageWidth || !imageHeight)\n                    return;\n                // get height min and max\n                var minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n                var maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n                // orientation info\n                var exif = item.getMetadata('exif') || {};\n                var orientation = exif.orientation || -1;\n                // get width and height from action, and swap of orientation is incorrect\n                if (orientation >= 5 && orientation <= 8) {\n                    var _ref2 = [imageHeight, imageWidth];\n                    imageWidth = _ref2[0];\n                    imageHeight = _ref2[1];\n                }\n                // scale up width and height when we're dealing with an SVG\n                if (!isBitmap(item.file) || root.query('GET_IMAGE_PREVIEW_UPSCALE')) {\n                    var scalar = 2048 / imageWidth;\n                    imageWidth *= scalar;\n                    imageHeight *= scalar;\n                }\n                // image aspect ratio\n                var imageAspectRatio = imageHeight / imageWidth;\n                // we need the item to get to the crop size\n                var previewAspectRatio = (item.getMetadata('crop') || {}).aspectRatio || imageAspectRatio;\n                // preview height range\n                var previewHeightMax = Math.max(minPreviewHeight, Math.min(imageHeight, maxPreviewHeight));\n                var itemWidth = root.rect.element.width;\n                var previewHeight = Math.min(itemWidth * previewAspectRatio, previewHeightMax);\n                // request update to panel height\n                root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n                    id: item.id,\n                    height: previewHeight\n                });\n            };\n            var didResizeView = function didResizeView(_ref3) {\n                var root = _ref3.root;\n                // actions in next write operation\n                root.ref.shouldRescale = true;\n            };\n            var didUpdateItemMetadata = function didUpdateItemMetadata(_ref4) {\n                var root = _ref4.root, action = _ref4.action;\n                if (action.change.key !== 'crop')\n                    return;\n                // actions in next write operation\n                root.ref.shouldRescale = true;\n            };\n            var didCalculatePreviewSize = function didCalculatePreviewSize(_ref5) {\n                var root = _ref5.root, action = _ref5.action;\n                // remember dimensions\n                root.ref.imageWidth = action.width;\n                root.ref.imageHeight = action.height;\n                // actions in next write operation\n                root.ref.shouldRescale = true;\n                root.ref.shouldDrawPreview = true;\n                // as image load could take a while and fire when draw loop is resting we need to give it a kick\n                root.dispatch('KICK');\n            };\n            // start writing\n            view.registerWriter(createRoute({\n                DID_RESIZE_ROOT: didResizeView,\n                DID_STOP_RESIZE: didResizeView,\n                DID_LOAD_ITEM: didLoadItem,\n                DID_IMAGE_PREVIEW_CALCULATE_SIZE: didCalculatePreviewSize,\n                DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata\n            }, function (_ref6) {\n                var root = _ref6.root, props = _ref6.props;\n                // no preview view attached\n                if (!root.ref.imagePreview)\n                    return;\n                // don't do anything while hidden\n                if (root.rect.element.hidden)\n                    return;\n                // resize the item panel\n                if (root.ref.shouldRescale) {\n                    rescaleItem(root, props);\n                    root.ref.shouldRescale = false;\n                }\n                if (root.ref.shouldDrawPreview) {\n                    // queue till next frame so we're sure the height has been applied this forces the draw image call inside the wrapper view to use the correct height\n                    requestAnimationFrame(function () {\n                        root.dispatch('DID_FINISH_CALCULATE_PREVIEWSIZE', {\n                            id: props.id\n                        });\n                    });\n                    root.ref.shouldDrawPreview = false;\n                }\n            }));\n        });\n        // expose plugin\n        return {\n            options: {\n                // Enable or disable image preview\n                allowImagePreview: [true, Type.BOOLEAN],\n                // filters file items to determine which are shown as preview\n                imagePreviewFilterItem: [\n                    function () {\n                        return true;\n                    },\n                    Type.FUNCTION\n                ],\n                // Fixed preview height\n                imagePreviewHeight: [null, Type.INT],\n                // Min image height\n                imagePreviewMinHeight: [44, Type.INT],\n                // Max image height\n                imagePreviewMaxHeight: [256, Type.INT],\n                // Max size of preview file for when createImageBitmap is not supported\n                imagePreviewMaxFileSize: [null, Type.INT],\n                // The amount of extra pixels added to the image preview to allow comfortable zooming\n                imagePreviewZoomFactor: [2, Type.INT],\n                // Should we upscale small images to fit the max bounding box of the preview area\n                imagePreviewUpscale: [false, Type.BOOLEAN],\n                // Max size of preview file that we allow to try to instant preview if createImageBitmap is not supported, else image is queued for loading\n                imagePreviewMaxInstantPreviewFileSize: [1000000, Type.INT],\n                // Style of the transparancy indicator used behind images\n                imagePreviewTransparencyIndicator: [null, Type.STRING],\n                // Enables or disables reading average image color\n                imagePreviewCalculateAverageImageColor: [false, Type.BOOLEAN],\n                // Enables or disables the previewing of markup\n                imagePreviewMarkupShow: [true, Type.BOOLEAN],\n                // Allows filtering of markup to only show certain shapes\n                imagePreviewMarkupFilter: [\n                    function () {\n                        return true;\n                    },\n                    Type.FUNCTION\n                ]\n            }\n        };\n    };\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    if (isBrowser) {\n        document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n    }\n    return plugin;\n});\n"],"mappings":"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","ignoreList":[]}