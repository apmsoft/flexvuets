{"version":3,"file":"viewer.esm.js","names":["_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_defineProperty","value","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","DEFAULTS","backdrop","button","navbar","title","toolbar","className","container","fullscreen","inheritedAttributes","initialViewIndex","inline","interval","keyboard","focus","loading","loop","minWidth","minHeight","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","slideOnTouch","toggleOnDblclick","tooltip","transition","zIndex","zIndexInline","zoomRatio","minZoomRatio","maxZoomRatio","url","ready","show","shown","hide","hidden","view","viewed","move","moved","rotate","rotated","scale","scaled","zoom","zoomed","play","stop","TEMPLATE","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","ACTION_MOVE","ACTION_SWITCH","ACTION_ZOOM","CLASS_ACTIVE","concat","CLASS_CLOSE","CLASS_FADE","CLASS_FIXED","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_HIDE","CLASS_HIDE_MD_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_XS_DOWN","CLASS_IN","CLASS_INVISIBLE","CLASS_LOADING","CLASS_MOVE","CLASS_OPEN","CLASS_SHOW","CLASS_TRANSITION","EVENT_CLICK","EVENT_DBLCLICK","EVENT_DRAG_START","EVENT_FOCUSIN","EVENT_KEY_DOWN","EVENT_LOAD","EVENT_TOUCH_END","EVENT_TOUCH_MOVE","EVENT_TOUCH_START","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_RESIZE","EVENT_TRANSITION_END","EVENT_WHEEL","EVENT_READY","EVENT_SHOW","EVENT_SHOWN","EVENT_HIDE","EVENT_HIDDEN","EVENT_VIEW","EVENT_VIEWED","EVENT_MOVE","EVENT_MOVED","EVENT_ROTATE","EVENT_ROTATED","EVENT_SCALE","EVENT_SCALED","EVENT_ZOOM","EVENT_ZOOMED","EVENT_PLAY","EVENT_STOP","DATA_ACTION","REGEXP_SPACES","BUTTONS","isString","isNaN","Number","isNumber","isUndefined","isObject","hasOwnProperty","isPlainObject","_constructor","call","error","isFunction","data","callback","Array","isArray","assign","_len","args","_key","arg","REGEXP_SUFFIX","setStyle","element","styles","style","property","test","escapeHTMLEntities","replace","hasClass","classList","contains","indexOf","addClass","elem","add","trim","removeClass","remove","toggleClass","added","REGEXP_HYPHENATE","hyphenate","toLowerCase","getData","name","dataset","getAttribute","setData","setAttribute","onceSupported","supported","once","listener","options","get","set","addEventListener","removeEventListener","removeListener","type","undefined","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","dispatchEvent","Event","CustomEvent","bubbles","cancelable","detail","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","getTransforms","_ref","scaleX","scaleY","translateX","translateY","values","transform","join","WebkitTransform","msTransform","getImageNameFromURL","decodeURIComponent","IS_SAFARI","navigator","userAgent","getImageNaturalSizes","image","newImage","createElement","naturalWidth","naturalHeight","body","onload","width","height","removeChild","src","cssText","appendChild","getResponsiveClass","getMaxZoomRatio","pointers","pointers2","ratios","pointer","pointerId","pointer2","x1","Math","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","sort","a","b","getPointer","_ref2","endOnly","pageX","pageY","end","timeStamp","Date","now","getPointersCenter","count","_ref3","render","initContainer","initViewer","initList","renderViewer","initBody","ownerDocument","scrollbarWidth","innerWidth","clientWidth","initialBodyPaddingRight","paddingRight","initialBodyComputedPaddingRight","getComputedStyle","containerData","innerHeight","parent","viewerData","max","offsetWidth","offsetHeight","parentData","fulled","viewer","_this","list","items","innerHTML","images","index","alt","getImageURL","item","img","firstElementChild","loadImage","renderList","outerWidth","resetList","initImage","done","_this2","footerHeight","footer","viewerWidth","viewerHeight","oldImageData","imageData","sizingImage","imageInitializing","abort","aspectRatio","min","x","y","initialImageData","renderImage","_this3","marginLeft","marginTop","viewing","moving","rotating","scaling","zooming","onTransitionEnd","imageRendering","resetImage","parentNode","events","bind","canvas","onClick","click","onDragStart","dragstart","onPointerDown","pointerdown","onPointerMove","pointermove","onPointerUp","pointerup","onKeyDown","keydown","onResize","resize","onWheel","wheel","passive","capture","onDblclick","dblclick","unbind","handlers","action","localName","parentElement","isTrusted","clearTimeout","clickCanvasTimeout","played","exit","full","toggle","reset","prev","next","preventDefault","doubleClickImageTimeout","load","timeout","originalImage","parentWidth","parentHeight","filled","keyCode","which","charCode","ctrlKey","buttons","showing","hiding","pointerType","changedTouches","touch","identifier","isSwitchable","change","imageClicked","setTimeout","isShown","close","open","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","player","getElementsByTagName","_this4","wheeling","delta","deltaY","wheelDelta","methods","immediate","build","transitioning","id","removeAttribute","initialOffsetWidth","hideImmediately","onViewerTransitionEnd","onImageTransitionEnd","zoomTo","querySelector","activeItem","onViewed","onLoad","complete","maxIndex","moveTo","_originalEvent","oldX","oldY","changed","originalEvent","degree","rotateTo","oldDegree","_scaleX","_scaleY","_this5","oldScaleX","oldScaleY","hasTooltip","_this6","_zoomable","newWidth","newHeight","oldRatio","offset","center","_this7","total","onLoadWhenPlay","requestFullscreen","referrerPolicy","playing","_this8","exitFullscreen","_this9","enforceFocus","_this10","clearEnforceFocus","_this11","tooltipBox","textContent","round","tooltipping","fading","update","_this12","isImg","destroy","querySelectorAll","changedIndexes","changedIndex","destroyed","delaying","initializing","onStart","others","onFocusin","parseFloat","fucus","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","mozRequestFullScreen","msRequestFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","offsetX","offsetY","absoluteOffsetX","p","AnotherViewer","Viewer","getUniqueID","nodeType","Error","init","progress","template","custom","zoomButtons","slice","rotateButtons","scaleButtons","deep","size","rotates","position","insertBefore","nextSibling","noConflict","setDefaults"],"sources":["viewer.esm.js"],"sourcesContent":["/*!\n * Viewer.js v1.9.0\n * https://fengyuanchen.github.io/viewerjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2020-12-06T11:25:15.688Z\n */\nfunction _typeof(obj) {\n    \"@babel/helpers - typeof\";\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n        _typeof = function (obj) {\n            return typeof obj;\n        };\n    }\n    else {\n        _typeof = function (obj) {\n            return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n        };\n    }\n    return _typeof(obj);\n}\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\nfunction _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor)\n            descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps)\n        _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps)\n        _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    }\n    else {\n        obj[key] = value;\n    }\n    return obj;\n}\nfunction ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n    if (Object.getOwnPropertySymbols) {\n        var symbols = Object.getOwnPropertySymbols(object);\n        if (enumerableOnly)\n            symbols = symbols.filter(function (sym) {\n                return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n            });\n        keys.push.apply(keys, symbols);\n    }\n    return keys;\n}\nfunction _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i] != null ? arguments[i] : {};\n        if (i % 2) {\n            ownKeys(Object(source), true).forEach(function (key) {\n                _defineProperty(target, key, source[key]);\n            });\n        }\n        else if (Object.getOwnPropertyDescriptors) {\n            Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n        }\n        else {\n            ownKeys(Object(source)).forEach(function (key) {\n                Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n            });\n        }\n    }\n    return target;\n}\nvar DEFAULTS = {\n    /**\n     * Enable a modal backdrop, specify `static` for a backdrop\n     * which doesn't close the modal on click.\n     * @type {boolean}\n     */\n    backdrop: true,\n    /**\n     * Show the button on the top-right of the viewer.\n     * @type {boolean}\n     */\n    button: true,\n    /**\n     * Show the navbar.\n     * @type {boolean | number}\n     */\n    navbar: true,\n    /**\n     * Specify the visibility and the content of the title.\n     * @type {boolean | number | Function | Array}\n     */\n    title: true,\n    /**\n     * Show the toolbar.\n     * @type {boolean | number | Object}\n     */\n    toolbar: true,\n    /**\n     * Custom class name(s) to add to the viewer's root element.\n     * @type {string}\n     */\n    className: '',\n    /**\n     * Define where to put the viewer in modal mode.\n     * @type {string | Element}\n     */\n    container: 'body',\n    /**\n     * Filter the images for viewing. Return true if the image is viewable.\n     * @type {Function}\n     */\n    filter: null,\n    /**\n     * Enable to request fullscreen when play.\n     * @type {boolean}\n     */\n    fullscreen: true,\n    /**\n     * Define the extra attributes to inherit from the original image.\n     * @type {Array}\n     */\n    inheritedAttributes: ['crossOrigin', 'decoding', 'isMap', 'loading', 'referrerPolicy', 'sizes', 'srcset', 'useMap'],\n    /**\n     * Define the initial index of image for viewing.\n     * @type {number}\n     */\n    initialViewIndex: 0,\n    /**\n     * Enable inline mode.\n     * @type {boolean}\n     */\n    inline: false,\n    /**\n     * The amount of time to delay between automatically cycling an image when playing.\n     * @type {number}\n     */\n    interval: 5000,\n    /**\n     * Enable keyboard support.\n     * @type {boolean}\n     */\n    keyboard: true,\n    /**\n     * Focus the viewer when initialized.\n     * @type {boolean}\n     */\n    focus: true,\n    /**\n     * Indicate if show a loading spinner when load image or not.\n     * @type {boolean}\n     */\n    loading: true,\n    /**\n     * Indicate if enable loop viewing or not.\n     * @type {boolean}\n     */\n    loop: true,\n    /**\n     * Min width of the viewer in inline mode.\n     * @type {number}\n     */\n    minWidth: 200,\n    /**\n     * Min height of the viewer in inline mode.\n     * @type {number}\n     */\n    minHeight: 100,\n    /**\n     * Enable to move the image.\n     * @type {boolean}\n     */\n    movable: true,\n    /**\n     * Enable to rotate the image.\n     * @type {boolean}\n     */\n    rotatable: true,\n    /**\n     * Enable to scale the image.\n     * @type {boolean}\n     */\n    scalable: true,\n    /**\n     * Enable to zoom the image.\n     * @type {boolean}\n     */\n    zoomable: true,\n    /**\n     * Enable to zoom the current image by dragging on the touch screen.\n     * @type {boolean}\n     */\n    zoomOnTouch: true,\n    /**\n     * Enable to zoom the image by wheeling mouse.\n     * @type {boolean}\n     */\n    zoomOnWheel: true,\n    /**\n     * Enable to slide to the next or previous image by swiping on the touch screen.\n     * @type {boolean}\n     */\n    slideOnTouch: true,\n    /**\n     * Indicate if toggle the image size between its natural size\n     * and initial size when double click on the image or not.\n     * @type {boolean}\n     */\n    toggleOnDblclick: true,\n    /**\n     * Show the tooltip with image ratio (percentage) when zoom in or zoom out.\n     * @type {boolean}\n     */\n    tooltip: true,\n    /**\n     * Enable CSS3 Transition for some special elements.\n     * @type {boolean}\n     */\n    transition: true,\n    /**\n     * Define the CSS `z-index` value of viewer in modal mode.\n     * @type {number}\n     */\n    zIndex: 2015,\n    /**\n     * Define the CSS `z-index` value of viewer in inline mode.\n     * @type {number}\n     */\n    zIndexInline: 0,\n    /**\n     * Define the ratio when zoom the image by wheeling mouse.\n     * @type {number}\n     */\n    zoomRatio: 0.1,\n    /**\n     * Define the min ratio of the image when zoom out.\n     * @type {number}\n     */\n    minZoomRatio: 0.01,\n    /**\n     * Define the max ratio of the image when zoom in.\n     * @type {number}\n     */\n    maxZoomRatio: 100,\n    /**\n     * Define where to get the original image URL for viewing.\n     * @type {string | Function}\n     */\n    url: 'src',\n    /**\n     * Event shortcuts.\n     * @type {Function}\n     */\n    ready: null,\n    show: null,\n    shown: null,\n    hide: null,\n    hidden: null,\n    view: null,\n    viewed: null,\n    move: null,\n    moved: null,\n    rotate: null,\n    rotated: null,\n    scale: null,\n    scaled: null,\n    zoom: null,\n    zoomed: null,\n    play: null,\n    stop: null\n};\nvar TEMPLATE = '<div class=\"viewer-container\" tabindex=\"-1\" touch-action=\"none\">' + '<div class=\"viewer-canvas\"></div>' + '<div class=\"viewer-footer\">' + '<div class=\"viewer-title\"></div>' + '<div class=\"viewer-toolbar\"></div>' + '<div class=\"viewer-navbar\">' + '<ul class=\"viewer-list\" role=\"navigation\"></ul>' + '</div>' + '</div>' + '<div class=\"viewer-tooltip\" role=\"alert\" aria-hidden=\"true\"></div>' + '<div class=\"viewer-button\" data-viewer-action=\"mix\" role=\"button\"></div>' + '<div class=\"viewer-player\"></div>' + '</div>';\nvar IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nvar WINDOW = IS_BROWSER ? window : {};\nvar IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\nvar HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\nvar NAMESPACE = 'viewer'; // Actions\nvar ACTION_MOVE = 'move';\nvar ACTION_SWITCH = 'switch';\nvar ACTION_ZOOM = 'zoom'; // Classes\nvar CLASS_ACTIVE = \"\".concat(NAMESPACE, \"-active\");\nvar CLASS_CLOSE = \"\".concat(NAMESPACE, \"-close\");\nvar CLASS_FADE = \"\".concat(NAMESPACE, \"-fade\");\nvar CLASS_FIXED = \"\".concat(NAMESPACE, \"-fixed\");\nvar CLASS_FULLSCREEN = \"\".concat(NAMESPACE, \"-fullscreen\");\nvar CLASS_FULLSCREEN_EXIT = \"\".concat(NAMESPACE, \"-fullscreen-exit\");\nvar CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\nvar CLASS_HIDE_MD_DOWN = \"\".concat(NAMESPACE, \"-hide-md-down\");\nvar CLASS_HIDE_SM_DOWN = \"\".concat(NAMESPACE, \"-hide-sm-down\");\nvar CLASS_HIDE_XS_DOWN = \"\".concat(NAMESPACE, \"-hide-xs-down\");\nvar CLASS_IN = \"\".concat(NAMESPACE, \"-in\");\nvar CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\nvar CLASS_LOADING = \"\".concat(NAMESPACE, \"-loading\");\nvar CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\nvar CLASS_OPEN = \"\".concat(NAMESPACE, \"-open\");\nvar CLASS_SHOW = \"\".concat(NAMESPACE, \"-show\");\nvar CLASS_TRANSITION = \"\".concat(NAMESPACE, \"-transition\"); // Native events\nvar EVENT_CLICK = 'click';\nvar EVENT_DBLCLICK = 'dblclick';\nvar EVENT_DRAG_START = 'dragstart';\nvar EVENT_FOCUSIN = 'focusin';\nvar EVENT_KEY_DOWN = 'keydown';\nvar EVENT_LOAD = 'load';\nvar EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\nvar EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\nvar EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\nvar EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\nvar EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\nvar EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\nvar EVENT_RESIZE = 'resize';\nvar EVENT_TRANSITION_END = 'transitionend';\nvar EVENT_WHEEL = 'wheel'; // Custom events\nvar EVENT_READY = 'ready';\nvar EVENT_SHOW = 'show';\nvar EVENT_SHOWN = 'shown';\nvar EVENT_HIDE = 'hide';\nvar EVENT_HIDDEN = 'hidden';\nvar EVENT_VIEW = 'view';\nvar EVENT_VIEWED = 'viewed';\nvar EVENT_MOVE = 'move';\nvar EVENT_MOVED = 'moved';\nvar EVENT_ROTATE = 'rotate';\nvar EVENT_ROTATED = 'rotated';\nvar EVENT_SCALE = 'scale';\nvar EVENT_SCALED = 'scaled';\nvar EVENT_ZOOM = 'zoom';\nvar EVENT_ZOOMED = 'zoomed';\nvar EVENT_PLAY = 'play';\nvar EVENT_STOP = 'stop'; // Data keys\nvar DATA_ACTION = \"\".concat(NAMESPACE, \"Action\"); // RegExps\nvar REGEXP_SPACES = /\\s\\s*/; // Misc\nvar BUTTONS = ['zoom-in', 'zoom-out', 'one-to-one', 'reset', 'prev', 'play', 'next', 'rotate-left', 'rotate-right', 'flip-horizontal', 'flip-vertical'];\n/**\n * Check if the given value is a string.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n */\nfunction isString(value) {\n    return typeof value === 'string';\n}\n/**\n * Check if the given value is not a number.\n */\nvar isNaN = Number.isNaN || WINDOW.isNaN;\n/**\n * Check if the given value is a number.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n */\nfunction isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n}\n/**\n * Check if the given value is undefined.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n */\nfunction isUndefined(value) {\n    return typeof value === 'undefined';\n}\n/**\n * Check if the given value is an object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n */\nfunction isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * Check if the given value is a plain object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n */\nfunction isPlainObject(value) {\n    if (!isObject(value)) {\n        return false;\n    }\n    try {\n        var _constructor = value.constructor;\n        var prototype = _constructor.prototype;\n        return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    }\n    catch (error) {\n        return false;\n    }\n}\n/**\n * Check if the given value is a function.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n */\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\n/**\n * Iterate the given data.\n * @param {*} data - The data to iterate.\n * @param {Function} callback - The process function for each element.\n * @returns {*} The original data.\n */\nfunction forEach(data, callback) {\n    if (data && isFunction(callback)) {\n        if (Array.isArray(data) || isNumber(data.length)\n        /* array-like */\n        ) {\n            var length = data.length;\n            var i;\n            for (i = 0; i < length; i += 1) {\n                if (callback.call(data, data[i], i, data) === false) {\n                    break;\n                }\n            }\n        }\n        else if (isObject(data)) {\n            Object.keys(data).forEach(function (key) {\n                callback.call(data, data[key], key, data);\n            });\n        }\n    }\n    return data;\n}\n/**\n * Extend the given object.\n * @param {*} obj - The object to be extended.\n * @param {*} args - The rest objects which will be merged to the first object.\n * @returns {Object} The extended object.\n */\nvar assign = Object.assign || function assign(obj) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n    }\n    if (isObject(obj) && args.length > 0) {\n        args.forEach(function (arg) {\n            if (isObject(arg)) {\n                Object.keys(arg).forEach(function (key) {\n                    obj[key] = arg[key];\n                });\n            }\n        });\n    }\n    return obj;\n};\nvar REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n/**\n * Apply styles to the given element.\n * @param {Element} element - The target element.\n * @param {Object} styles - The styles for applying.\n */\nfunction setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n        if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n            value += 'px';\n        }\n        style[property] = value;\n    });\n}\n/**\n * Escape a string for using in HTML.\n * @param {String} value - The string to escape.\n * @returns {String} Returns the escaped string.\n */\nfunction escapeHTMLEntities(value) {\n    return isString(value) ? value.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;') : value;\n}\n/**\n * Check if the given element has a special class.\n * @param {Element} element - The element to check.\n * @param {string} value - The class to search.\n * @returns {boolean} Returns `true` if the special class was found.\n */\nfunction hasClass(element, value) {\n    if (!element || !value) {\n        return false;\n    }\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n}\n/**\n * Add classes to the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be added.\n */\nfunction addClass(element, value) {\n    if (!element || !value) {\n        return;\n    }\n    if (isNumber(element.length)) {\n        forEach(element, function (elem) {\n            addClass(elem, value);\n        });\n        return;\n    }\n    if (element.classList) {\n        element.classList.add(value);\n        return;\n    }\n    var className = element.className.trim();\n    if (!className) {\n        element.className = value;\n    }\n    else if (className.indexOf(value) < 0) {\n        element.className = \"\".concat(className, \" \").concat(value);\n    }\n}\n/**\n * Remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be removed.\n */\nfunction removeClass(element, value) {\n    if (!element || !value) {\n        return;\n    }\n    if (isNumber(element.length)) {\n        forEach(element, function (elem) {\n            removeClass(elem, value);\n        });\n        return;\n    }\n    if (element.classList) {\n        element.classList.remove(value);\n        return;\n    }\n    if (element.className.indexOf(value) >= 0) {\n        element.className = element.className.replace(value, '');\n    }\n}\n/**\n * Add or remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be toggled.\n * @param {boolean} added - Add only.\n */\nfunction toggleClass(element, value, added) {\n    if (!value) {\n        return;\n    }\n    if (isNumber(element.length)) {\n        forEach(element, function (elem) {\n            toggleClass(elem, value, added);\n        });\n        return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n        addClass(element, value);\n    }\n    else {\n        removeClass(element, value);\n    }\n}\nvar REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n/**\n * Transform the given string from camelCase to kebab-case\n * @param {string} value - The value to transform.\n * @returns {string} The transformed value.\n */\nfunction hyphenate(value) {\n    return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n}\n/**\n * Get data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to get.\n * @returns {string} The data value.\n */\nfunction getData(element, name) {\n    if (isObject(element[name])) {\n        return element[name];\n    }\n    if (element.dataset) {\n        return element.dataset[name];\n    }\n    return element.getAttribute(\"data-\".concat(hyphenate(name)));\n}\n/**\n * Set data to the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to set.\n * @param {string} data - The data value.\n */\nfunction setData(element, name, data) {\n    if (isObject(data)) {\n        element[name] = data;\n    }\n    else if (element.dataset) {\n        element.dataset[name] = data;\n    }\n    else {\n        element.setAttribute(\"data-\".concat(hyphenate(name)), data);\n    }\n}\nvar onceSupported = function () {\n    var supported = false;\n    if (IS_BROWSER) {\n        var once = false;\n        var listener = function listener() { };\n        var options = Object.defineProperty({}, 'once', {\n            get: function get() {\n                supported = true;\n                return once;\n            },\n            /**\n             * This setter can fix a `TypeError` in strict mode\n             * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n             * @param {boolean} value - The value to set\n             */\n            set: function set(value) {\n                once = value;\n            }\n        });\n        WINDOW.addEventListener('test', listener, options);\n        WINDOW.removeEventListener('test', listener, options);\n    }\n    return supported;\n}();\n/**\n * Remove event listener from the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\nfunction removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n        if (!onceSupported) {\n            var listeners = element.listeners;\n            if (listeners && listeners[event] && listeners[event][listener]) {\n                handler = listeners[event][listener];\n                delete listeners[event][listener];\n                if (Object.keys(listeners[event]).length === 0) {\n                    delete listeners[event];\n                }\n                if (Object.keys(listeners).length === 0) {\n                    delete element.listeners;\n                }\n            }\n        }\n        element.removeEventListener(event, handler, options);\n    });\n}\n/**\n * Add event listener to the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\nfunction addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n        if (options.once && !onceSupported) {\n            var _element$listeners = element.listeners, listeners = _element$listeners === void 0 ? {} : _element$listeners;\n            _handler = function handler() {\n                delete listeners[event][listener];\n                element.removeEventListener(event, _handler, options);\n                for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                    args[_key2] = arguments[_key2];\n                }\n                listener.apply(element, args);\n            };\n            if (!listeners[event]) {\n                listeners[event] = {};\n            }\n            if (listeners[event][listener]) {\n                element.removeEventListener(event, listeners[event][listener], options);\n            }\n            listeners[event][listener] = _handler;\n            element.listeners = listeners;\n        }\n        element.addEventListener(event, _handler, options);\n    });\n}\n/**\n * Dispatch event on the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Object} data - The additional event data.\n * @param {Object} options - The additional event options.\n * @returns {boolean} Indicate if the event is default prevented or not.\n */\nfunction dispatchEvent(element, type, data, options) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n        event = new CustomEvent(type, _objectSpread2({\n            bubbles: true,\n            cancelable: true,\n            detail: data\n        }, options));\n    }\n    else {\n        event = document.createEvent('CustomEvent');\n        event.initCustomEvent(type, true, true, data);\n    }\n    return element.dispatchEvent(event);\n}\n/**\n * Get the offset base on the document.\n * @param {Element} element - The target element.\n * @returns {Object} The offset data.\n */\nfunction getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n        left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n        top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n}\n/**\n * Get transforms base on the given object.\n * @param {Object} obj - The target object.\n * @returns {string} A string contains transform values.\n */\nfunction getTransforms(_ref) {\n    var rotate = _ref.rotate, scaleX = _ref.scaleX, scaleY = _ref.scaleY, translateX = _ref.translateX, translateY = _ref.translateY;\n    var values = [];\n    if (isNumber(translateX) && translateX !== 0) {\n        values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n    if (isNumber(translateY) && translateY !== 0) {\n        values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n    if (isNumber(rotate) && rotate !== 0) {\n        values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n    if (isNumber(scaleX) && scaleX !== 1) {\n        values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n    if (isNumber(scaleY) && scaleY !== 1) {\n        values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n        WebkitTransform: transform,\n        msTransform: transform,\n        transform: transform\n    };\n}\n/**\n * Get an image name from an image url.\n * @param {string} url - The target url.\n * @example\n * // picture.jpg\n * getImageNameFromURL('https://domain.com/path/to/picture.jpg?size=1280×960')\n * @returns {string} A string contains the image name.\n */\nfunction getImageNameFromURL(url) {\n    return isString(url) ? decodeURIComponent(url.replace(/^.*\\//, '').replace(/[?&#].*$/, '')) : '';\n}\nvar IS_SAFARI = WINDOW.navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(WINDOW.navigator.userAgent);\n/**\n * Get an image's natural sizes.\n * @param {string} image - The target image.\n * @param {Object} options - The viewer options.\n * @param {Function} callback - The callback function.\n * @returns {HTMLImageElement} The new image.\n */\nfunction getImageNaturalSizes(image, options, callback) {\n    var newImage = document.createElement('img'); // Modern browsers (except Safari)\n    if (image.naturalWidth && !IS_SAFARI) {\n        callback(image.naturalWidth, image.naturalHeight);\n        return newImage;\n    }\n    var body = document.body || document.documentElement;\n    newImage.onload = function () {\n        callback(newImage.width, newImage.height);\n        if (!IS_SAFARI) {\n            body.removeChild(newImage);\n        }\n    };\n    forEach(options.inheritedAttributes, function (name) {\n        var value = image.getAttribute(name);\n        if (value !== null) {\n            newImage.setAttribute(name, value);\n        }\n    });\n    newImage.src = image.src; // iOS Safari will convert the image automatically\n    // with its orientation once append it into DOM\n    if (!IS_SAFARI) {\n        newImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n        body.appendChild(newImage);\n    }\n    return newImage;\n}\n/**\n * Get the related class name of a responsive type number.\n * @param {string} type - The responsive type.\n * @returns {string} The related class name.\n */\nfunction getResponsiveClass(type) {\n    switch (type) {\n        case 2:\n            return CLASS_HIDE_XS_DOWN;\n        case 3:\n            return CLASS_HIDE_SM_DOWN;\n        case 4:\n            return CLASS_HIDE_MD_DOWN;\n        default:\n            return '';\n    }\n}\n/**\n * Get the max ratio of a group of pointers.\n * @param {string} pointers - The target pointers.\n * @returns {number} The result ratio.\n */\nfunction getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n    var ratios = [];\n    forEach(pointers, function (pointer, pointerId) {\n        delete pointers2[pointerId];\n        forEach(pointers2, function (pointer2) {\n            var x1 = Math.abs(pointer.startX - pointer2.startX);\n            var y1 = Math.abs(pointer.startY - pointer2.startY);\n            var x2 = Math.abs(pointer.endX - pointer2.endX);\n            var y2 = Math.abs(pointer.endY - pointer2.endY);\n            var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n            var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n            var ratio = (z2 - z1) / z1;\n            ratios.push(ratio);\n        });\n    });\n    ratios.sort(function (a, b) {\n        return Math.abs(a) < Math.abs(b);\n    });\n    return ratios[0];\n}\n/**\n * Get a pointer from an event object.\n * @param {Object} event - The target event object.\n * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n * @returns {Object} The result pointer contains start and/or end point coordinates.\n */\nfunction getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX, pageY = _ref2.pageY;\n    var end = {\n        endX: pageX,\n        endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n        timeStamp: Date.now(),\n        startX: pageX,\n        startY: pageY\n    }, end);\n}\n/**\n * Get the center point coordinate of a group of pointers.\n * @param {Object} pointers - The target pointers.\n * @returns {Object} The center point coordinate.\n */\nfunction getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n        var startX = _ref3.startX, startY = _ref3.startY;\n        pageX += startX;\n        pageY += startY;\n        count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n        pageX: pageX,\n        pageY: pageY\n    };\n}\nvar render = {\n    render: function render() {\n        this.initContainer();\n        this.initViewer();\n        this.initList();\n        this.renderViewer();\n    },\n    initBody: function initBody() {\n        var ownerDocument = this.element.ownerDocument;\n        var body = ownerDocument.body || ownerDocument.documentElement;\n        this.body = body;\n        this.scrollbarWidth = window.innerWidth - ownerDocument.documentElement.clientWidth;\n        this.initialBodyPaddingRight = body.style.paddingRight;\n        this.initialBodyComputedPaddingRight = window.getComputedStyle(body).paddingRight;\n    },\n    initContainer: function initContainer() {\n        this.containerData = {\n            width: window.innerWidth,\n            height: window.innerHeight\n        };\n    },\n    initViewer: function initViewer() {\n        var options = this.options, parent = this.parent;\n        var viewerData;\n        if (options.inline) {\n            viewerData = {\n                width: Math.max(parent.offsetWidth, options.minWidth),\n                height: Math.max(parent.offsetHeight, options.minHeight)\n            };\n            this.parentData = viewerData;\n        }\n        if (this.fulled || !viewerData) {\n            viewerData = this.containerData;\n        }\n        this.viewerData = assign({}, viewerData);\n    },\n    renderViewer: function renderViewer() {\n        if (this.options.inline && !this.fulled) {\n            setStyle(this.viewer, this.viewerData);\n        }\n    },\n    initList: function initList() {\n        var _this = this;\n        var element = this.element, options = this.options, list = this.list;\n        var items = []; // initList may be called in this.update, so should keep idempotent\n        list.innerHTML = '';\n        forEach(this.images, function (image, index) {\n            var src = image.src;\n            var alt = image.alt || getImageNameFromURL(src);\n            var url = _this.getImageURL(image);\n            if (src || url) {\n                var item = document.createElement('li');\n                var img = document.createElement('img');\n                forEach(options.inheritedAttributes, function (name) {\n                    var value = image.getAttribute(name);\n                    if (value !== null) {\n                        img.setAttribute(name, value);\n                    }\n                });\n                img.src = src || url;\n                img.alt = alt;\n                img.setAttribute('data-original-url', url || src);\n                item.setAttribute('data-index', index);\n                item.setAttribute('data-viewer-action', 'view');\n                item.setAttribute('role', 'button');\n                if (options.keyboard) {\n                    item.setAttribute('tabindex', 0);\n                }\n                item.appendChild(img);\n                list.appendChild(item);\n                items.push(item);\n            }\n        });\n        this.items = items;\n        forEach(items, function (item) {\n            var image = item.firstElementChild;\n            setData(image, 'filled', true);\n            if (options.loading) {\n                addClass(item, CLASS_LOADING);\n            }\n            addListener(image, EVENT_LOAD, function (event) {\n                if (options.loading) {\n                    removeClass(item, CLASS_LOADING);\n                }\n                _this.loadImage(event);\n            }, {\n                once: true\n            });\n        });\n        if (options.transition) {\n            addListener(element, EVENT_VIEWED, function () {\n                addClass(list, CLASS_TRANSITION);\n            }, {\n                once: true\n            });\n        }\n    },\n    renderList: function renderList(index) {\n        var i = index || this.index;\n        var width = this.items[i].offsetWidth || 30;\n        var outerWidth = width + 1; // 1 pixel of `margin-left` width\n        // Place the active item in the center of the screen\n        setStyle(this.list, assign({\n            width: outerWidth * this.length\n        }, getTransforms({\n            translateX: (this.viewerData.width - width) / 2 - outerWidth * i\n        })));\n    },\n    resetList: function resetList() {\n        var list = this.list;\n        list.innerHTML = '';\n        removeClass(list, CLASS_TRANSITION);\n        setStyle(list, getTransforms({\n            translateX: 0\n        }));\n    },\n    initImage: function initImage(done) {\n        var _this2 = this;\n        var options = this.options, image = this.image, viewerData = this.viewerData;\n        var footerHeight = this.footer.offsetHeight;\n        var viewerWidth = viewerData.width;\n        var viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n        var oldImageData = this.imageData || {};\n        var sizingImage;\n        this.imageInitializing = {\n            abort: function abort() {\n                sizingImage.onload = null;\n            }\n        };\n        sizingImage = getImageNaturalSizes(image, options, function (naturalWidth, naturalHeight) {\n            var aspectRatio = naturalWidth / naturalHeight;\n            var width = viewerWidth;\n            var height = viewerHeight;\n            _this2.imageInitializing = false;\n            if (viewerHeight * aspectRatio > viewerWidth) {\n                height = viewerWidth / aspectRatio;\n            }\n            else {\n                width = viewerHeight * aspectRatio;\n            }\n            width = Math.min(width * 0.9, naturalWidth);\n            height = Math.min(height * 0.9, naturalHeight);\n            var left = (viewerWidth - width) / 2;\n            var top = (viewerHeight - height) / 2;\n            var imageData = {\n                left: left,\n                top: top,\n                x: left,\n                y: top,\n                width: width,\n                height: height,\n                ratio: width / naturalWidth,\n                aspectRatio: aspectRatio,\n                naturalWidth: naturalWidth,\n                naturalHeight: naturalHeight\n            };\n            var initialImageData = assign({}, imageData);\n            if (options.rotatable) {\n                imageData.rotate = oldImageData.rotate || 0;\n                initialImageData.rotate = 0;\n            }\n            if (options.scalable) {\n                imageData.scaleX = oldImageData.scaleX || 1;\n                imageData.scaleY = oldImageData.scaleY || 1;\n                initialImageData.scaleX = 1;\n                initialImageData.scaleY = 1;\n            }\n            _this2.imageData = imageData;\n            _this2.initialImageData = initialImageData;\n            if (done) {\n                done();\n            }\n        });\n    },\n    renderImage: function renderImage(done) {\n        var _this3 = this;\n        var image = this.image, imageData = this.imageData;\n        setStyle(image, assign({\n            width: imageData.width,\n            height: imageData.height,\n            // XXX: Not to use translateX/Y to avoid image shaking when zooming\n            marginLeft: imageData.x,\n            marginTop: imageData.y\n        }, getTransforms(imageData)));\n        if (done) {\n            if ((this.viewing || this.moving || this.rotating || this.scaling || this.zooming) && this.options.transition && hasClass(image, CLASS_TRANSITION)) {\n                var onTransitionEnd = function onTransitionEnd() {\n                    _this3.imageRendering = false;\n                    done();\n                };\n                this.imageRendering = {\n                    abort: function abort() {\n                        removeListener(image, EVENT_TRANSITION_END, onTransitionEnd);\n                    }\n                };\n                addListener(image, EVENT_TRANSITION_END, onTransitionEnd, {\n                    once: true\n                });\n            }\n            else {\n                done();\n            }\n        }\n    },\n    resetImage: function resetImage() {\n        // this.image only defined after viewed\n        if (this.viewing || this.viewed) {\n            var image = this.image;\n            if (this.viewing) {\n                this.viewing.abort();\n            }\n            image.parentNode.removeChild(image);\n            this.image = null;\n        }\n    }\n};\nvar events = {\n    bind: function bind() {\n        var options = this.options, viewer = this.viewer, canvas = this.canvas;\n        var document = this.element.ownerDocument;\n        addListener(viewer, EVENT_CLICK, this.onClick = this.click.bind(this));\n        addListener(viewer, EVENT_DRAG_START, this.onDragStart = this.dragstart.bind(this));\n        addListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown = this.pointerdown.bind(this));\n        addListener(document, EVENT_POINTER_MOVE, this.onPointerMove = this.pointermove.bind(this));\n        addListener(document, EVENT_POINTER_UP, this.onPointerUp = this.pointerup.bind(this));\n        addListener(document, EVENT_KEY_DOWN, this.onKeyDown = this.keydown.bind(this));\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n        if (options.zoomable && options.zoomOnWheel) {\n            addListener(viewer, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n                passive: false,\n                capture: true\n            });\n        }\n        if (options.toggleOnDblclick) {\n            addListener(canvas, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n        }\n    },\n    unbind: function unbind() {\n        var options = this.options, viewer = this.viewer, canvas = this.canvas;\n        var document = this.element.ownerDocument;\n        removeListener(viewer, EVENT_CLICK, this.onClick);\n        removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n        removeListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n        removeListener(document, EVENT_POINTER_MOVE, this.onPointerMove);\n        removeListener(document, EVENT_POINTER_UP, this.onPointerUp);\n        removeListener(document, EVENT_KEY_DOWN, this.onKeyDown);\n        removeListener(window, EVENT_RESIZE, this.onResize);\n        if (options.zoomable && options.zoomOnWheel) {\n            removeListener(viewer, EVENT_WHEEL, this.onWheel, {\n                passive: false,\n                capture: true\n            });\n        }\n        if (options.toggleOnDblclick) {\n            removeListener(canvas, EVENT_DBLCLICK, this.onDblclick);\n        }\n    }\n};\nvar handlers = {\n    click: function click(event) {\n        var options = this.options, imageData = this.imageData;\n        var target = event.target;\n        var action = getData(target, DATA_ACTION);\n        if (!action && target.localName === 'img' && target.parentElement.localName === 'li') {\n            target = target.parentElement;\n            action = getData(target, DATA_ACTION);\n        } // Cancel the emulated click when the native click event was triggered.\n        if (IS_TOUCH_DEVICE && event.isTrusted && target === this.canvas) {\n            clearTimeout(this.clickCanvasTimeout);\n        }\n        switch (action) {\n            case 'mix':\n                if (this.played) {\n                    this.stop();\n                }\n                else if (options.inline) {\n                    if (this.fulled) {\n                        this.exit();\n                    }\n                    else {\n                        this.full();\n                    }\n                }\n                else {\n                    this.hide();\n                }\n                break;\n            case 'hide':\n                this.hide();\n                break;\n            case 'view':\n                this.view(getData(target, 'index'));\n                break;\n            case 'zoom-in':\n                this.zoom(0.1, true);\n                break;\n            case 'zoom-out':\n                this.zoom(-0.1, true);\n                break;\n            case 'one-to-one':\n                this.toggle();\n                break;\n            case 'reset':\n                this.reset();\n                break;\n            case 'prev':\n                this.prev(options.loop);\n                break;\n            case 'play':\n                this.play(options.fullscreen);\n                break;\n            case 'next':\n                this.next(options.loop);\n                break;\n            case 'rotate-left':\n                this.rotate(-90);\n                break;\n            case 'rotate-right':\n                this.rotate(90);\n                break;\n            case 'flip-horizontal':\n                this.scaleX(-imageData.scaleX || -1);\n                break;\n            case 'flip-vertical':\n                this.scaleY(-imageData.scaleY || -1);\n                break;\n            default:\n                if (this.played) {\n                    this.stop();\n                }\n        }\n    },\n    dblclick: function dblclick(event) {\n        event.preventDefault();\n        if (this.viewed && event.target === this.image) {\n            // Cancel the emulated double click when the native dblclick event was triggered.\n            if (IS_TOUCH_DEVICE && event.isTrusted) {\n                clearTimeout(this.doubleClickImageTimeout);\n            }\n            this.toggle();\n        }\n    },\n    load: function load() {\n        var _this = this;\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = false;\n        }\n        var element = this.element, options = this.options, image = this.image, index = this.index, viewerData = this.viewerData;\n        removeClass(image, CLASS_INVISIBLE);\n        if (options.loading) {\n            removeClass(this.canvas, CLASS_LOADING);\n        }\n        image.style.cssText = 'height:0;' + \"margin-left:\".concat(viewerData.width / 2, \"px;\") + \"margin-top:\".concat(viewerData.height / 2, \"px;\") + 'max-width:none!important;' + 'position:absolute;' + 'width:0;';\n        this.initImage(function () {\n            toggleClass(image, CLASS_MOVE, options.movable);\n            toggleClass(image, CLASS_TRANSITION, options.transition);\n            _this.renderImage(function () {\n                _this.viewed = true;\n                _this.viewing = false;\n                if (isFunction(options.viewed)) {\n                    addListener(element, EVENT_VIEWED, options.viewed, {\n                        once: true\n                    });\n                }\n                dispatchEvent(element, EVENT_VIEWED, {\n                    originalImage: _this.images[index],\n                    index: index,\n                    image: image\n                }, {\n                    cancelable: false\n                });\n            });\n        });\n    },\n    loadImage: function loadImage(event) {\n        var image = event.target;\n        var parent = image.parentNode;\n        var parentWidth = parent.offsetWidth || 30;\n        var parentHeight = parent.offsetHeight || 50;\n        var filled = !!getData(image, 'filled');\n        getImageNaturalSizes(image, this.options, function (naturalWidth, naturalHeight) {\n            var aspectRatio = naturalWidth / naturalHeight;\n            var width = parentWidth;\n            var height = parentHeight;\n            if (parentHeight * aspectRatio > parentWidth) {\n                if (filled) {\n                    width = parentHeight * aspectRatio;\n                }\n                else {\n                    height = parentWidth / aspectRatio;\n                }\n            }\n            else if (filled) {\n                height = parentWidth / aspectRatio;\n            }\n            else {\n                width = parentHeight * aspectRatio;\n            }\n            setStyle(image, assign({\n                width: width,\n                height: height\n            }, getTransforms({\n                translateX: (parentWidth - width) / 2,\n                translateY: (parentHeight - height) / 2\n            })));\n        });\n    },\n    keydown: function keydown(event) {\n        var options = this.options;\n        if (!options.keyboard) {\n            return;\n        }\n        var keyCode = event.keyCode || event.which || event.charCode;\n        switch (keyCode) {\n            // Enter\n            case 13:\n                if (this.viewer.contains(event.target)) {\n                    this.click(event);\n                }\n                break;\n        }\n        if (!this.fulled) {\n            return;\n        }\n        switch (keyCode) {\n            // Escape\n            case 27:\n                if (this.played) {\n                    this.stop();\n                }\n                else if (options.inline) {\n                    if (this.fulled) {\n                        this.exit();\n                    }\n                }\n                else {\n                    this.hide();\n                }\n                break;\n            // Space\n            case 32:\n                if (this.played) {\n                    this.stop();\n                }\n                break;\n            // ArrowLeft\n            case 37:\n                this.prev(options.loop);\n                break;\n            // ArrowUp\n            case 38:\n                // Prevent scroll on Firefox\n                event.preventDefault(); // Zoom in\n                this.zoom(options.zoomRatio, true);\n                break;\n            // ArrowRight\n            case 39:\n                this.next(options.loop);\n                break;\n            // ArrowDown\n            case 40:\n                // Prevent scroll on Firefox\n                event.preventDefault(); // Zoom out\n                this.zoom(-options.zoomRatio, true);\n                break;\n            // Ctrl + 0\n            case 48: // Fall through\n            // Ctrl + 1\n            // eslint-disable-next-line no-fallthrough\n            case 49:\n                if (event.ctrlKey) {\n                    event.preventDefault();\n                    this.toggle();\n                }\n                break;\n        }\n    },\n    dragstart: function dragstart(event) {\n        if (event.target.localName === 'img') {\n            event.preventDefault();\n        }\n    },\n    pointerdown: function pointerdown(event) {\n        var options = this.options, pointers = this.pointers;\n        var buttons = event.buttons, button = event.button;\n        if (!this.viewed || this.showing || this.viewing || this.hiding // Handle mouse event and pointer event and ignore touch event\n            || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)\n            isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n                || event.ctrlKey)) {\n            return;\n        } // Prevent default behaviours as page zooming in touch devices.\n        event.preventDefault();\n        if (event.changedTouches) {\n            forEach(event.changedTouches, function (touch) {\n                pointers[touch.identifier] = getPointer(touch);\n            });\n        }\n        else {\n            pointers[event.pointerId || 0] = getPointer(event);\n        }\n        var action = options.movable ? ACTION_MOVE : false;\n        if (options.zoomOnTouch && options.zoomable && Object.keys(pointers).length > 1) {\n            action = ACTION_ZOOM;\n        }\n        else if (options.slideOnTouch && (event.pointerType === 'touch' || event.type === 'touchstart') && this.isSwitchable()) {\n            action = ACTION_SWITCH;\n        }\n        if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n            removeClass(this.image, CLASS_TRANSITION);\n        }\n        this.action = action;\n    },\n    pointermove: function pointermove(event) {\n        var pointers = this.pointers, action = this.action;\n        if (!this.viewed || !action) {\n            return;\n        }\n        event.preventDefault();\n        if (event.changedTouches) {\n            forEach(event.changedTouches, function (touch) {\n                assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n            });\n        }\n        else {\n            assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n        }\n        this.change(event);\n    },\n    pointerup: function pointerup(event) {\n        var _this2 = this;\n        var options = this.options, action = this.action, pointers = this.pointers;\n        var pointer;\n        if (event.changedTouches) {\n            forEach(event.changedTouches, function (touch) {\n                pointer = pointers[touch.identifier];\n                delete pointers[touch.identifier];\n            });\n        }\n        else {\n            pointer = pointers[event.pointerId || 0];\n            delete pointers[event.pointerId || 0];\n        }\n        if (!action) {\n            return;\n        }\n        event.preventDefault();\n        if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n            addClass(this.image, CLASS_TRANSITION);\n        }\n        this.action = false; // Emulate click and double click in touch devices to support backdrop and image zooming (#210).\n        if (IS_TOUCH_DEVICE && action !== ACTION_ZOOM && pointer && Date.now() - pointer.timeStamp < 500) {\n            clearTimeout(this.clickCanvasTimeout);\n            clearTimeout(this.doubleClickImageTimeout);\n            if (options.toggleOnDblclick && this.viewed && event.target === this.image) {\n                if (this.imageClicked) {\n                    this.imageClicked = false; // This timeout will be cleared later when a native dblclick event is triggering\n                    this.doubleClickImageTimeout = setTimeout(function () {\n                        dispatchEvent(_this2.image, EVENT_DBLCLICK);\n                    }, 50);\n                }\n                else {\n                    this.imageClicked = true; // The default timing of a double click in Windows is 500 ms\n                    this.doubleClickImageTimeout = setTimeout(function () {\n                        _this2.imageClicked = false;\n                    }, 500);\n                }\n            }\n            else {\n                this.imageClicked = false;\n                if (options.backdrop && options.backdrop !== 'static' && event.target === this.canvas) {\n                    // This timeout will be cleared later when a native click event is triggering\n                    this.clickCanvasTimeout = setTimeout(function () {\n                        dispatchEvent(_this2.canvas, EVENT_CLICK);\n                    }, 50);\n                }\n            }\n        }\n    },\n    resize: function resize() {\n        var _this3 = this;\n        if (!this.isShown || this.hiding) {\n            return;\n        }\n        if (this.fulled) {\n            this.close();\n            this.initBody();\n            this.open();\n        }\n        this.initContainer();\n        this.initViewer();\n        this.renderViewer();\n        this.renderList();\n        if (this.viewed) {\n            this.initImage(function () {\n                _this3.renderImage();\n            });\n        }\n        if (this.played) {\n            if (this.options.fullscreen && this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n                this.stop();\n                return;\n            }\n            forEach(this.player.getElementsByTagName('img'), function (image) {\n                addListener(image, EVENT_LOAD, _this3.loadImage.bind(_this3), {\n                    once: true\n                });\n                dispatchEvent(image, EVENT_LOAD);\n            });\n        }\n    },\n    wheel: function wheel(event) {\n        var _this4 = this;\n        if (!this.viewed) {\n            return;\n        }\n        event.preventDefault(); // Limit wheel speed to prevent zoom too fast\n        if (this.wheeling) {\n            return;\n        }\n        this.wheeling = true;\n        setTimeout(function () {\n            _this4.wheeling = false;\n        }, 50);\n        var ratio = Number(this.options.zoomRatio) || 0.1;\n        var delta = 1;\n        if (event.deltaY) {\n            delta = event.deltaY > 0 ? 1 : -1;\n        }\n        else if (event.wheelDelta) {\n            delta = -event.wheelDelta / 120;\n        }\n        else if (event.detail) {\n            delta = event.detail > 0 ? 1 : -1;\n        }\n        this.zoom(-delta * ratio, true, event);\n    }\n};\nvar methods = {\n    /** Show the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if show the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    show: function show() {\n        var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        var element = this.element, options = this.options;\n        if (options.inline || this.showing || this.isShown || this.showing) {\n            return this;\n        }\n        if (!this.ready) {\n            this.build();\n            if (this.ready) {\n                this.show(immediate);\n            }\n            return this;\n        }\n        if (isFunction(options.show)) {\n            addListener(element, EVENT_SHOW, options.show, {\n                once: true\n            });\n        }\n        if (dispatchEvent(element, EVENT_SHOW) === false || !this.ready) {\n            return this;\n        }\n        if (this.hiding) {\n            this.transitioning.abort();\n        }\n        this.showing = true;\n        this.open();\n        var viewer = this.viewer;\n        removeClass(viewer, CLASS_HIDE);\n        viewer.setAttribute('role', 'dialog');\n        viewer.setAttribute('aria-labelledby', this.title.id);\n        viewer.setAttribute('aria-modal', true);\n        viewer.removeAttribute('aria-hidden');\n        if (options.transition && !immediate) {\n            var shown = this.shown.bind(this);\n            this.transitioning = {\n                abort: function abort() {\n                    removeListener(viewer, EVENT_TRANSITION_END, shown);\n                    removeClass(viewer, CLASS_IN);\n                }\n            };\n            addClass(viewer, CLASS_TRANSITION); // Force reflow to enable CSS3 transition\n            viewer.initialOffsetWidth = viewer.offsetWidth;\n            addListener(viewer, EVENT_TRANSITION_END, shown, {\n                once: true\n            });\n            addClass(viewer, CLASS_IN);\n        }\n        else {\n            addClass(viewer, CLASS_IN);\n            this.shown();\n        }\n        return this;\n    },\n    /**\n     * Hide the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if hide the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    hide: function hide() {\n        var _this = this;\n        var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        var element = this.element, options = this.options;\n        if (options.inline || this.hiding || !(this.isShown || this.showing)) {\n            return this;\n        }\n        if (isFunction(options.hide)) {\n            addListener(element, EVENT_HIDE, options.hide, {\n                once: true\n            });\n        }\n        if (dispatchEvent(element, EVENT_HIDE) === false) {\n            return this;\n        }\n        if (this.showing) {\n            this.transitioning.abort();\n        }\n        this.hiding = true;\n        if (this.played) {\n            this.stop();\n        }\n        else if (this.viewing) {\n            this.viewing.abort();\n        }\n        var viewer = this.viewer, image = this.image;\n        var hideImmediately = function hideImmediately() {\n            removeClass(viewer, CLASS_IN);\n            _this.hidden();\n        };\n        if (options.transition && !immediate) {\n            var onViewerTransitionEnd = function onViewerTransitionEnd(event) {\n                // Ignore all propagating `transitionend` events (#275).\n                if (event && event.target === viewer) {\n                    removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n                    _this.hidden();\n                }\n            };\n            var onImageTransitionEnd = function onImageTransitionEnd() {\n                // In case of show the viewer by `viewer.show(true)` previously (#407).\n                if (hasClass(viewer, CLASS_TRANSITION)) {\n                    addListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n                    removeClass(viewer, CLASS_IN);\n                }\n                else {\n                    hideImmediately();\n                }\n            };\n            this.transitioning = {\n                abort: function abort() {\n                    if (_this.viewed && hasClass(image, CLASS_TRANSITION)) {\n                        removeListener(image, EVENT_TRANSITION_END, onImageTransitionEnd);\n                    }\n                    else if (hasClass(viewer, CLASS_TRANSITION)) {\n                        removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n                    }\n                }\n            }; // In case of hiding the viewer when holding on the image (#255),\n            // note that the `CLASS_TRANSITION` class will be removed on pointer down.\n            if (this.viewed && hasClass(image, CLASS_TRANSITION)) {\n                addListener(image, EVENT_TRANSITION_END, onImageTransitionEnd, {\n                    once: true\n                });\n                this.zoomTo(0, false, false, true);\n            }\n            else {\n                onImageTransitionEnd();\n            }\n        }\n        else {\n            hideImmediately();\n        }\n        return this;\n    },\n    /**\n     * View one of the images with image's index\n     * @param {number} index - The index of the image to view.\n     * @returns {Viewer} this\n     */\n    view: function view() {\n        var _this2 = this;\n        var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.initialViewIndex;\n        index = Number(index) || 0;\n        if (this.hiding || this.played || index < 0 || index >= this.length || this.viewed && index === this.index) {\n            return this;\n        }\n        if (!this.isShown) {\n            this.index = index;\n            return this.show();\n        }\n        if (this.viewing) {\n            this.viewing.abort();\n        }\n        var element = this.element, options = this.options, title = this.title, canvas = this.canvas;\n        var item = this.items[index];\n        var img = item.querySelector('img');\n        var url = getData(img, 'originalUrl');\n        var alt = img.getAttribute('alt');\n        var image = document.createElement('img');\n        forEach(options.inheritedAttributes, function (name) {\n            var value = img.getAttribute(name);\n            if (value !== null) {\n                image.setAttribute(name, value);\n            }\n        });\n        image.src = url;\n        image.alt = alt;\n        if (isFunction(options.view)) {\n            addListener(element, EVENT_VIEW, options.view, {\n                once: true\n            });\n        }\n        if (dispatchEvent(element, EVENT_VIEW, {\n            originalImage: this.images[index],\n            index: index,\n            image: image\n        }) === false || !this.isShown || this.hiding || this.played) {\n            return this;\n        }\n        var activeItem = this.items[this.index];\n        removeClass(activeItem, CLASS_ACTIVE);\n        activeItem.removeAttribute('aria-selected');\n        addClass(item, CLASS_ACTIVE);\n        item.setAttribute('aria-selected', true);\n        if (options.focus) {\n            item.focus();\n        }\n        this.image = image;\n        this.viewed = false;\n        this.index = index;\n        this.imageData = {};\n        addClass(image, CLASS_INVISIBLE);\n        if (options.loading) {\n            addClass(canvas, CLASS_LOADING);\n        }\n        canvas.innerHTML = '';\n        canvas.appendChild(image); // Center current item\n        this.renderList(); // Clear title\n        title.innerHTML = ''; // Generate title after viewed\n        var onViewed = function onViewed() {\n            var imageData = _this2.imageData;\n            var render = Array.isArray(options.title) ? options.title[1] : options.title;\n            title.innerHTML = escapeHTMLEntities(isFunction(render) ? render.call(_this2, image, imageData) : \"\".concat(alt, \" (\").concat(imageData.naturalWidth, \" \\xD7 \").concat(imageData.naturalHeight, \")\"));\n        };\n        var onLoad;\n        addListener(element, EVENT_VIEWED, onViewed, {\n            once: true\n        });\n        this.viewing = {\n            abort: function abort() {\n                removeListener(element, EVENT_VIEWED, onViewed);\n                if (image.complete) {\n                    if (_this2.imageRendering) {\n                        _this2.imageRendering.abort();\n                    }\n                    else if (_this2.imageInitializing) {\n                        _this2.imageInitializing.abort();\n                    }\n                }\n                else {\n                    // Cancel download to save bandwidth.\n                    image.src = '';\n                    removeListener(image, EVENT_LOAD, onLoad);\n                    if (_this2.timeout) {\n                        clearTimeout(_this2.timeout);\n                    }\n                }\n            }\n        };\n        if (image.complete) {\n            this.load();\n        }\n        else {\n            addListener(image, EVENT_LOAD, onLoad = this.load.bind(this), {\n                once: true\n            });\n            if (this.timeout) {\n                clearTimeout(this.timeout);\n            } // Make the image visible if it fails to load within 1s\n            this.timeout = setTimeout(function () {\n                removeClass(image, CLASS_INVISIBLE);\n                _this2.timeout = false;\n            }, 1000);\n        }\n        return this;\n    },\n    /**\n     * View the previous image\n     * @param {boolean} [loop=false] - Indicate if view the last one\n     * when it is the first one at present.\n     * @returns {Viewer} this\n     */\n    prev: function prev() {\n        var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        var index = this.index - 1;\n        if (index < 0) {\n            index = loop ? this.length - 1 : 0;\n        }\n        this.view(index);\n        return this;\n    },\n    /**\n     * View the next image\n     * @param {boolean} [loop=false] - Indicate if view the first one\n     * when it is the last one at present.\n     * @returns {Viewer} this\n     */\n    next: function next() {\n        var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        var maxIndex = this.length - 1;\n        var index = this.index + 1;\n        if (index > maxIndex) {\n            index = loop ? 0 : maxIndex;\n        }\n        this.view(index);\n        return this;\n    },\n    /**\n     * Move the image with relative offsets.\n     * @param {number} x - The moving distance in the horizontal direction.\n     * @param {number} [y=x] The moving distance in the vertical direction.\n     * @returns {Viewer} this\n     */\n    move: function move(x) {\n        var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n        var imageData = this.imageData;\n        this.moveTo(isUndefined(x) ? x : imageData.x + Number(x), isUndefined(y) ? y : imageData.y + Number(y));\n        return this;\n    },\n    /**\n     * Move the image to an absolute point.\n     * @param {number} x - The new position in the horizontal direction.\n     * @param {number} [y=x] - The new position in the vertical direction.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    moveTo: function moveTo(x) {\n        var _this3 = this;\n        var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n        var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        var element = this.element, options = this.options, imageData = this.imageData;\n        x = Number(x);\n        y = Number(y);\n        if (this.viewed && !this.played && options.movable) {\n            var oldX = imageData.x;\n            var oldY = imageData.y;\n            var changed = false;\n            if (isNumber(x)) {\n                changed = true;\n            }\n            else {\n                x = oldX;\n            }\n            if (isNumber(y)) {\n                changed = true;\n            }\n            else {\n                y = oldY;\n            }\n            if (changed) {\n                if (isFunction(options.move)) {\n                    addListener(element, EVENT_MOVE, options.move, {\n                        once: true\n                    });\n                }\n                if (dispatchEvent(element, EVENT_MOVE, {\n                    x: x,\n                    y: y,\n                    oldX: oldX,\n                    oldY: oldY,\n                    originalEvent: _originalEvent\n                }) === false) {\n                    return this;\n                }\n                imageData.x = x;\n                imageData.y = y;\n                imageData.left = x;\n                imageData.top = y;\n                this.moving = true;\n                this.renderImage(function () {\n                    _this3.moving = false;\n                    if (isFunction(options.moved)) {\n                        addListener(element, EVENT_MOVED, options.moved, {\n                            once: true\n                        });\n                    }\n                    dispatchEvent(element, EVENT_MOVED, {\n                        x: x,\n                        y: y,\n                        oldX: oldX,\n                        oldY: oldY,\n                        originalEvent: _originalEvent\n                    }, {\n                        cancelable: false\n                    });\n                });\n            }\n        }\n        return this;\n    },\n    /**\n     * Rotate the image with a relative degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotate: function rotate(degree) {\n        this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n        return this;\n    },\n    /**\n     * Rotate the image to an absolute degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotateTo: function rotateTo(degree) {\n        var _this4 = this;\n        var element = this.element, options = this.options, imageData = this.imageData;\n        degree = Number(degree);\n        if (isNumber(degree) && this.viewed && !this.played && options.rotatable) {\n            var oldDegree = imageData.rotate;\n            if (isFunction(options.rotate)) {\n                addListener(element, EVENT_ROTATE, options.rotate, {\n                    once: true\n                });\n            }\n            if (dispatchEvent(element, EVENT_ROTATE, {\n                degree: degree,\n                oldDegree: oldDegree\n            }) === false) {\n                return this;\n            }\n            imageData.rotate = degree;\n            this.rotating = true;\n            this.renderImage(function () {\n                _this4.rotating = false;\n                if (isFunction(options.rotated)) {\n                    addListener(element, EVENT_ROTATED, options.rotated, {\n                        once: true\n                    });\n                }\n                dispatchEvent(element, EVENT_ROTATED, {\n                    degree: degree,\n                    oldDegree: oldDegree\n                }, {\n                    cancelable: false\n                });\n            });\n        }\n        return this;\n    },\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Viewer} this\n     */\n    scaleX: function scaleX(_scaleX) {\n        this.scale(_scaleX, this.imageData.scaleY);\n        return this;\n    },\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scaleY: function scaleY(_scaleY) {\n        this.scale(this.imageData.scaleX, _scaleY);\n        return this;\n    },\n    /**\n     * Scale the image.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scale: function scale(scaleX) {\n        var _this5 = this;\n        var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n        var element = this.element, options = this.options, imageData = this.imageData;\n        scaleX = Number(scaleX);\n        scaleY = Number(scaleY);\n        if (this.viewed && !this.played && options.scalable) {\n            var oldScaleX = imageData.scaleX;\n            var oldScaleY = imageData.scaleY;\n            var changed = false;\n            if (isNumber(scaleX)) {\n                changed = true;\n            }\n            else {\n                scaleX = oldScaleX;\n            }\n            if (isNumber(scaleY)) {\n                changed = true;\n            }\n            else {\n                scaleY = oldScaleY;\n            }\n            if (changed) {\n                if (isFunction(options.scale)) {\n                    addListener(element, EVENT_SCALE, options.scale, {\n                        once: true\n                    });\n                }\n                if (dispatchEvent(element, EVENT_SCALE, {\n                    scaleX: scaleX,\n                    scaleY: scaleY,\n                    oldScaleX: oldScaleX,\n                    oldScaleY: oldScaleY\n                }) === false) {\n                    return this;\n                }\n                imageData.scaleX = scaleX;\n                imageData.scaleY = scaleY;\n                this.scaling = true;\n                this.renderImage(function () {\n                    _this5.scaling = false;\n                    if (isFunction(options.scaled)) {\n                        addListener(element, EVENT_SCALED, options.scaled, {\n                            once: true\n                        });\n                    }\n                    dispatchEvent(element, EVENT_SCALED, {\n                        scaleX: scaleX,\n                        scaleY: scaleY,\n                        oldScaleX: oldScaleX,\n                        oldScaleY: oldScaleY\n                    }, {\n                        cancelable: false\n                    });\n                });\n            }\n        }\n        return this;\n    },\n    /**\n     * Zoom the image with a relative ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    zoom: function zoom(ratio) {\n        var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        var imageData = this.imageData;\n        ratio = Number(ratio);\n        if (ratio < 0) {\n            ratio = 1 / (1 - ratio);\n        }\n        else {\n            ratio = 1 + ratio;\n        }\n        this.zoomTo(imageData.width * ratio / imageData.naturalWidth, hasTooltip, _originalEvent);\n        return this;\n    },\n    /**\n     * Zoom the image to an absolute ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n     * @returns {Viewer} this\n     */\n    zoomTo: function zoomTo(ratio) {\n        var _this6 = this;\n        var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        var _zoomable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n        var element = this.element, options = this.options, pointers = this.pointers, imageData = this.imageData;\n        var x = imageData.x, y = imageData.y, width = imageData.width, height = imageData.height, naturalWidth = imageData.naturalWidth, naturalHeight = imageData.naturalHeight;\n        ratio = Math.max(0, ratio);\n        if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n            if (!_zoomable) {\n                var minZoomRatio = Math.max(0.01, options.minZoomRatio);\n                var maxZoomRatio = Math.min(100, options.maxZoomRatio);\n                ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n            }\n            if (_originalEvent && options.zoomRatio >= 0.055 && ratio > 0.95 && ratio < 1.05) {\n                ratio = 1;\n            }\n            var newWidth = naturalWidth * ratio;\n            var newHeight = naturalHeight * ratio;\n            var offsetWidth = newWidth - width;\n            var offsetHeight = newHeight - height;\n            var oldRatio = width / naturalWidth;\n            if (isFunction(options.zoom)) {\n                addListener(element, EVENT_ZOOM, options.zoom, {\n                    once: true\n                });\n            }\n            if (dispatchEvent(element, EVENT_ZOOM, {\n                ratio: ratio,\n                oldRatio: oldRatio,\n                originalEvent: _originalEvent\n            }) === false) {\n                return this;\n            }\n            this.zooming = true;\n            if (_originalEvent) {\n                var offset = getOffset(this.viewer);\n                var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n                    pageX: _originalEvent.pageX,\n                    pageY: _originalEvent.pageY\n                }; // Zoom from the triggering point of the event\n                imageData.x -= offsetWidth * ((center.pageX - offset.left - x) / width);\n                imageData.y -= offsetHeight * ((center.pageY - offset.top - y) / height);\n            }\n            else {\n                // Zoom from the center of the image\n                imageData.x -= offsetWidth / 2;\n                imageData.y -= offsetHeight / 2;\n            }\n            imageData.left = imageData.x;\n            imageData.top = imageData.y;\n            imageData.width = newWidth;\n            imageData.height = newHeight;\n            imageData.ratio = ratio;\n            this.renderImage(function () {\n                _this6.zooming = false;\n                if (isFunction(options.zoomed)) {\n                    addListener(element, EVENT_ZOOMED, options.zoomed, {\n                        once: true\n                    });\n                }\n                dispatchEvent(element, EVENT_ZOOMED, {\n                    ratio: ratio,\n                    oldRatio: oldRatio,\n                    originalEvent: _originalEvent\n                }, {\n                    cancelable: false\n                });\n            });\n            if (hasTooltip) {\n                this.tooltip();\n            }\n        }\n        return this;\n    },\n    /**\n     * Play the images\n     * @param {boolean} [fullscreen=false] - Indicate if request fullscreen or not.\n     * @returns {Viewer} this\n     */\n    play: function play() {\n        var _this7 = this;\n        var fullscreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        if (!this.isShown || this.played) {\n            return this;\n        }\n        var element = this.element, options = this.options;\n        if (isFunction(options.play)) {\n            addListener(element, EVENT_PLAY, options.play, {\n                once: true\n            });\n        }\n        if (dispatchEvent(element, EVENT_PLAY) === false) {\n            return this;\n        }\n        var player = this.player;\n        var onLoad = this.loadImage.bind(this);\n        var list = [];\n        var total = 0;\n        var index = 0;\n        this.played = true;\n        this.onLoadWhenPlay = onLoad;\n        if (fullscreen) {\n            this.requestFullscreen();\n        }\n        addClass(player, CLASS_SHOW);\n        forEach(this.items, function (item, i) {\n            var img = item.querySelector('img');\n            var image = document.createElement('img');\n            image.src = getData(img, 'originalUrl');\n            image.alt = img.getAttribute('alt');\n            image.referrerPolicy = img.referrerPolicy;\n            total += 1;\n            addClass(image, CLASS_FADE);\n            toggleClass(image, CLASS_TRANSITION, options.transition);\n            if (hasClass(item, CLASS_ACTIVE)) {\n                addClass(image, CLASS_IN);\n                index = i;\n            }\n            list.push(image);\n            addListener(image, EVENT_LOAD, onLoad, {\n                once: true\n            });\n            player.appendChild(image);\n        });\n        if (isNumber(options.interval) && options.interval > 0) {\n            var play = function play() {\n                _this7.playing = setTimeout(function () {\n                    removeClass(list[index], CLASS_IN);\n                    index += 1;\n                    index = index < total ? index : 0;\n                    addClass(list[index], CLASS_IN);\n                    play();\n                }, options.interval);\n            };\n            if (total > 1) {\n                play();\n            }\n        }\n        return this;\n    },\n    // Stop play\n    stop: function stop() {\n        var _this8 = this;\n        if (!this.played) {\n            return this;\n        }\n        var element = this.element, options = this.options;\n        if (isFunction(options.stop)) {\n            addListener(element, EVENT_STOP, options.stop, {\n                once: true\n            });\n        }\n        if (dispatchEvent(element, EVENT_STOP) === false) {\n            return this;\n        }\n        var player = this.player;\n        this.played = false;\n        clearTimeout(this.playing);\n        forEach(player.getElementsByTagName('img'), function (image) {\n            removeListener(image, EVENT_LOAD, _this8.onLoadWhenPlay);\n        });\n        removeClass(player, CLASS_SHOW);\n        player.innerHTML = '';\n        this.exitFullscreen();\n        return this;\n    },\n    // Enter modal mode (only available in inline mode)\n    full: function full() {\n        var _this9 = this;\n        var options = this.options, viewer = this.viewer, image = this.image, list = this.list;\n        if (!this.isShown || this.played || this.fulled || !options.inline) {\n            return this;\n        }\n        this.fulled = true;\n        this.open();\n        addClass(this.button, CLASS_FULLSCREEN_EXIT);\n        if (options.transition) {\n            removeClass(list, CLASS_TRANSITION);\n            if (this.viewed) {\n                removeClass(image, CLASS_TRANSITION);\n            }\n        }\n        addClass(viewer, CLASS_FIXED);\n        viewer.setAttribute('role', 'dialog');\n        viewer.setAttribute('aria-labelledby', this.title.id);\n        viewer.setAttribute('aria-modal', true);\n        viewer.removeAttribute('style');\n        setStyle(viewer, {\n            zIndex: options.zIndex\n        });\n        if (options.focus) {\n            this.enforceFocus();\n        }\n        this.initContainer();\n        this.viewerData = assign({}, this.containerData);\n        this.renderList();\n        if (this.viewed) {\n            this.initImage(function () {\n                _this9.renderImage(function () {\n                    if (options.transition) {\n                        setTimeout(function () {\n                            addClass(image, CLASS_TRANSITION);\n                            addClass(list, CLASS_TRANSITION);\n                        }, 0);\n                    }\n                });\n            });\n        }\n        return this;\n    },\n    // Exit modal mode (only available in inline mode)\n    exit: function exit() {\n        var _this10 = this;\n        var options = this.options, viewer = this.viewer, image = this.image, list = this.list;\n        if (!this.isShown || this.played || !this.fulled || !options.inline) {\n            return this;\n        }\n        this.fulled = false;\n        this.close();\n        removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n        if (options.transition) {\n            removeClass(list, CLASS_TRANSITION);\n            if (this.viewed) {\n                removeClass(image, CLASS_TRANSITION);\n            }\n        }\n        if (options.focus) {\n            this.clearEnforceFocus();\n        }\n        viewer.removeAttribute('role');\n        viewer.removeAttribute('aria-labelledby');\n        viewer.removeAttribute('aria-modal');\n        removeClass(viewer, CLASS_FIXED);\n        setStyle(viewer, {\n            zIndex: options.zIndexInline\n        });\n        this.viewerData = assign({}, this.parentData);\n        this.renderViewer();\n        this.renderList();\n        if (this.viewed) {\n            this.initImage(function () {\n                _this10.renderImage(function () {\n                    if (options.transition) {\n                        setTimeout(function () {\n                            addClass(image, CLASS_TRANSITION);\n                            addClass(list, CLASS_TRANSITION);\n                        }, 0);\n                    }\n                });\n            });\n        }\n        return this;\n    },\n    // Show the current ratio of the image with percentage\n    tooltip: function tooltip() {\n        var _this11 = this;\n        var options = this.options, tooltipBox = this.tooltipBox, imageData = this.imageData;\n        if (!this.viewed || this.played || !options.tooltip) {\n            return this;\n        }\n        tooltipBox.textContent = \"\".concat(Math.round(imageData.ratio * 100), \"%\");\n        if (!this.tooltipping) {\n            if (options.transition) {\n                if (this.fading) {\n                    dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n                }\n                addClass(tooltipBox, CLASS_SHOW);\n                addClass(tooltipBox, CLASS_FADE);\n                addClass(tooltipBox, CLASS_TRANSITION);\n                tooltipBox.removeAttribute('aria-hidden'); // Force reflow to enable CSS3 transition\n                tooltipBox.initialOffsetWidth = tooltipBox.offsetWidth;\n                addClass(tooltipBox, CLASS_IN);\n            }\n            else {\n                addClass(tooltipBox, CLASS_SHOW);\n                tooltipBox.removeAttribute('aria-hidden');\n            }\n        }\n        else {\n            clearTimeout(this.tooltipping);\n        }\n        this.tooltipping = setTimeout(function () {\n            if (options.transition) {\n                addListener(tooltipBox, EVENT_TRANSITION_END, function () {\n                    removeClass(tooltipBox, CLASS_SHOW);\n                    removeClass(tooltipBox, CLASS_FADE);\n                    removeClass(tooltipBox, CLASS_TRANSITION);\n                    tooltipBox.setAttribute('aria-hidden', true);\n                    _this11.fading = false;\n                }, {\n                    once: true\n                });\n                removeClass(tooltipBox, CLASS_IN);\n                _this11.fading = true;\n            }\n            else {\n                removeClass(tooltipBox, CLASS_SHOW);\n                tooltipBox.setAttribute('aria-hidden', true);\n            }\n            _this11.tooltipping = false;\n        }, 1000);\n        return this;\n    },\n    // Toggle the image size between its natural size and initial size\n    toggle: function toggle() {\n        if (this.imageData.ratio === 1) {\n            this.zoomTo(this.initialImageData.ratio, true);\n        }\n        else {\n            this.zoomTo(1, true);\n        }\n        return this;\n    },\n    // Reset the image to its initial state\n    reset: function reset() {\n        if (this.viewed && !this.played) {\n            this.imageData = assign({}, this.initialImageData);\n            this.renderImage();\n        }\n        return this;\n    },\n    // Update viewer when images changed\n    update: function update() {\n        var _this12 = this;\n        var element = this.element, options = this.options, isImg = this.isImg; // Destroy viewer if the target image was deleted\n        if (isImg && !element.parentNode) {\n            return this.destroy();\n        }\n        var images = [];\n        forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n            if (isFunction(options.filter)) {\n                if (options.filter.call(_this12, image)) {\n                    images.push(image);\n                }\n            }\n            else if (_this12.getImageURL(image)) {\n                images.push(image);\n            }\n        });\n        if (!images.length) {\n            return this;\n        }\n        this.images = images;\n        this.length = images.length;\n        if (this.ready) {\n            var changedIndexes = [];\n            forEach(this.items, function (item, i) {\n                var img = item.querySelector('img');\n                var image = images[i];\n                if (image && img) {\n                    if (image.src !== img.src // Title changed (#408)\n                        || image.alt !== img.alt) {\n                        changedIndexes.push(i);\n                    }\n                }\n                else {\n                    changedIndexes.push(i);\n                }\n            });\n            setStyle(this.list, {\n                width: 'auto'\n            });\n            this.initList();\n            if (this.isShown) {\n                if (this.length) {\n                    if (this.viewed) {\n                        var changedIndex = changedIndexes.indexOf(this.index);\n                        if (changedIndex >= 0) {\n                            this.viewed = false;\n                            this.view(Math.max(Math.min(this.index - changedIndex, this.length - 1), 0));\n                        }\n                        else {\n                            var activeItem = this.items[this.index]; // Reactivate the current viewing item after reset the list.\n                            addClass(activeItem, CLASS_ACTIVE);\n                            activeItem.setAttribute('aria-selected', true);\n                        }\n                    }\n                }\n                else {\n                    this.image = null;\n                    this.viewed = false;\n                    this.index = 0;\n                    this.imageData = {};\n                    this.canvas.innerHTML = '';\n                    this.title.innerHTML = '';\n                }\n            }\n        }\n        else {\n            this.build();\n        }\n        return this;\n    },\n    // Destroy the viewer\n    destroy: function destroy() {\n        var element = this.element, options = this.options;\n        if (!element[NAMESPACE]) {\n            return this;\n        }\n        this.destroyed = true;\n        if (this.ready) {\n            if (this.played) {\n                this.stop();\n            }\n            if (options.inline) {\n                if (this.fulled) {\n                    this.exit();\n                }\n                this.unbind();\n            }\n            else if (this.isShown) {\n                if (this.viewing) {\n                    if (this.imageRendering) {\n                        this.imageRendering.abort();\n                    }\n                    else if (this.imageInitializing) {\n                        this.imageInitializing.abort();\n                    }\n                }\n                if (this.hiding) {\n                    this.transitioning.abort();\n                }\n                this.hidden();\n            }\n            else if (this.showing) {\n                this.transitioning.abort();\n                this.hidden();\n            }\n            this.ready = false;\n            this.viewer.parentNode.removeChild(this.viewer);\n        }\n        else if (options.inline) {\n            if (this.delaying) {\n                this.delaying.abort();\n            }\n            else if (this.initializing) {\n                this.initializing.abort();\n            }\n        }\n        if (!options.inline) {\n            removeListener(element, EVENT_CLICK, this.onStart);\n        }\n        element[NAMESPACE] = undefined;\n        return this;\n    }\n};\nvar others = {\n    getImageURL: function getImageURL(image) {\n        var url = this.options.url;\n        if (isString(url)) {\n            url = image.getAttribute(url);\n        }\n        else if (isFunction(url)) {\n            url = url.call(this, image);\n        }\n        else {\n            url = '';\n        }\n        return url;\n    },\n    enforceFocus: function enforceFocus() {\n        var _this = this;\n        this.clearEnforceFocus();\n        addListener(document, EVENT_FOCUSIN, this.onFocusin = function (_ref) {\n            var target = _ref.target;\n            var viewer = _this.viewer;\n            if (target !== document && target !== viewer && !viewer.contains(target)) {\n                viewer.focus();\n            }\n        });\n    },\n    clearEnforceFocus: function clearEnforceFocus() {\n        if (this.onFocusin) {\n            removeListener(document, EVENT_FOCUSIN, this.onFocusin);\n            this.onFocusin = null;\n        }\n    },\n    open: function open() {\n        var body = this.body;\n        addClass(body, CLASS_OPEN);\n        body.style.paddingRight = \"\".concat(this.scrollbarWidth + (parseFloat(this.initialBodyComputedPaddingRight) || 0), \"px\");\n    },\n    close: function close() {\n        var body = this.body;\n        removeClass(body, CLASS_OPEN);\n        body.style.paddingRight = this.initialBodyPaddingRight;\n    },\n    shown: function shown() {\n        var element = this.element, options = this.options, viewer = this.viewer;\n        this.fulled = true;\n        this.isShown = true;\n        this.render();\n        this.bind();\n        this.showing = false;\n        if (options.focus) {\n            viewer.focus();\n            this.enforceFocus();\n        }\n        if (isFunction(options.shown)) {\n            addListener(element, EVENT_SHOWN, options.shown, {\n                once: true\n            });\n        }\n        if (dispatchEvent(element, EVENT_SHOWN) === false) {\n            return;\n        }\n        if (this.ready && this.isShown && !this.hiding) {\n            this.view(this.index);\n        }\n    },\n    hidden: function hidden() {\n        var element = this.element, options = this.options, viewer = this.viewer;\n        if (options.fucus) {\n            this.clearEnforceFocus();\n        }\n        this.fulled = false;\n        this.viewed = false;\n        this.isShown = false;\n        this.close();\n        this.unbind();\n        addClass(viewer, CLASS_HIDE);\n        viewer.removeAttribute('role');\n        viewer.removeAttribute('aria-labelledby');\n        viewer.removeAttribute('aria-modal');\n        viewer.setAttribute('aria-hidden', true);\n        this.resetList();\n        this.resetImage();\n        this.hiding = false;\n        if (!this.destroyed) {\n            if (isFunction(options.hidden)) {\n                addListener(element, EVENT_HIDDEN, options.hidden, {\n                    once: true\n                });\n            }\n            dispatchEvent(element, EVENT_HIDDEN, null, {\n                cancelable: false\n            });\n        }\n    },\n    requestFullscreen: function requestFullscreen() {\n        var document = this.element.ownerDocument;\n        if (this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n            var documentElement = document.documentElement; // Element.requestFullscreen()\n            if (documentElement.requestFullscreen) {\n                documentElement.requestFullscreen();\n            }\n            else if (documentElement.webkitRequestFullscreen) {\n                documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n            }\n            else if (documentElement.mozRequestFullScreen) {\n                documentElement.mozRequestFullScreen();\n            }\n            else if (documentElement.msRequestFullscreen) {\n                documentElement.msRequestFullscreen();\n            }\n        }\n    },\n    exitFullscreen: function exitFullscreen() {\n        var document = this.element.ownerDocument;\n        if (this.fulled && (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n            // Document.exitFullscreen()\n            if (document.exitFullscreen) {\n                document.exitFullscreen();\n            }\n            else if (document.webkitExitFullscreen) {\n                document.webkitExitFullscreen();\n            }\n            else if (document.mozCancelFullScreen) {\n                document.mozCancelFullScreen();\n            }\n            else if (document.msExitFullscreen) {\n                document.msExitFullscreen();\n            }\n        }\n    },\n    change: function change(event) {\n        var options = this.options, pointers = this.pointers;\n        var pointer = pointers[Object.keys(pointers)[0]]; // In the case of the `pointers` object is empty (#421)\n        if (!pointer) {\n            return;\n        }\n        var offsetX = pointer.endX - pointer.startX;\n        var offsetY = pointer.endY - pointer.startY;\n        switch (this.action) {\n            // Move the current image\n            case ACTION_MOVE:\n                this.move(offsetX, offsetY, event);\n                break;\n            // Zoom the current image\n            case ACTION_ZOOM:\n                this.zoom(getMaxZoomRatio(pointers), false, event);\n                break;\n            case ACTION_SWITCH:\n                {\n                    this.action = 'switched';\n                    var absoluteOffsetX = Math.abs(offsetX);\n                    if (absoluteOffsetX > 1 && absoluteOffsetX > Math.abs(offsetY)) {\n                        // Empty `pointers` as `touchend` event will not be fired after swiped in iOS browsers.\n                        this.pointers = {};\n                        if (offsetX > 1) {\n                            this.prev(options.loop);\n                        }\n                        else if (offsetX < -1) {\n                            this.next(options.loop);\n                        }\n                    }\n                    break;\n                }\n        } // Override\n        forEach(pointers, function (p) {\n            p.startX = p.endX;\n            p.startY = p.endY;\n        });\n    },\n    isSwitchable: function isSwitchable() {\n        var imageData = this.imageData, viewerData = this.viewerData;\n        return this.length > 1 && imageData.x >= 0 && imageData.y >= 0 && imageData.width <= viewerData.width && imageData.height <= viewerData.height;\n    }\n};\nvar AnotherViewer = WINDOW.Viewer;\nvar getUniqueID = function (id) {\n    return function () {\n        id += 1;\n        return id;\n    };\n}(-1);\nvar Viewer = /*#__PURE__*/ function () {\n    /**\n     * Create a new Viewer.\n     * @param {Element} element - The target element for viewing.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Viewer(element) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        _classCallCheck(this, Viewer);\n        if (!element || element.nodeType !== 1) {\n            throw new Error('The first argument is required and must be an element.');\n        }\n        this.element = element;\n        this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n        this.action = false;\n        this.fading = false;\n        this.fulled = false;\n        this.hiding = false;\n        this.imageClicked = false;\n        this.imageData = {};\n        this.index = this.options.initialViewIndex;\n        this.isImg = false;\n        this.isShown = false;\n        this.length = 0;\n        this.moving = false;\n        this.played = false;\n        this.playing = false;\n        this.pointers = {};\n        this.ready = false;\n        this.rotating = false;\n        this.scaling = false;\n        this.showing = false;\n        this.timeout = false;\n        this.tooltipping = false;\n        this.viewed = false;\n        this.viewing = false;\n        this.wheeling = false;\n        this.zooming = false;\n        this.id = getUniqueID();\n        this.init();\n    }\n    _createClass(Viewer, [{\n            key: \"init\",\n            value: function init() {\n                var _this = this;\n                var element = this.element, options = this.options;\n                if (element[NAMESPACE]) {\n                    return;\n                }\n                element[NAMESPACE] = this; // The `focus` option requires the `keyboard` option set to `true`.\n                if (options.focus && !options.keyboard) {\n                    options.focus = false;\n                }\n                var isImg = element.localName === 'img';\n                var images = [];\n                forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n                    if (isFunction(options.filter)) {\n                        if (options.filter.call(_this, image)) {\n                            images.push(image);\n                        }\n                    }\n                    else if (_this.getImageURL(image)) {\n                        images.push(image);\n                    }\n                });\n                this.isImg = isImg;\n                this.length = images.length;\n                this.images = images;\n                this.initBody(); // Override `transition` option if it is not supported\n                if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n                    options.transition = false;\n                }\n                if (options.inline) {\n                    var count = 0;\n                    var progress = function progress() {\n                        count += 1;\n                        if (count === _this.length) {\n                            var timeout;\n                            _this.initializing = false;\n                            _this.delaying = {\n                                abort: function abort() {\n                                    clearTimeout(timeout);\n                                }\n                            }; // build asynchronously to keep `this.viewer` is accessible in `ready` event handler.\n                            timeout = setTimeout(function () {\n                                _this.delaying = false;\n                                _this.build();\n                            }, 0);\n                        }\n                    };\n                    this.initializing = {\n                        abort: function abort() {\n                            forEach(images, function (image) {\n                                if (!image.complete) {\n                                    removeListener(image, EVENT_LOAD, progress);\n                                }\n                            });\n                        }\n                    };\n                    forEach(images, function (image) {\n                        if (image.complete) {\n                            progress();\n                        }\n                        else {\n                            addListener(image, EVENT_LOAD, progress, {\n                                once: true\n                            });\n                        }\n                    });\n                }\n                else {\n                    addListener(element, EVENT_CLICK, this.onStart = function (_ref) {\n                        var target = _ref.target;\n                        if (target.localName === 'img' && (!isFunction(options.filter) || options.filter.call(_this, target))) {\n                            _this.view(_this.images.indexOf(target));\n                        }\n                    });\n                }\n            }\n        }, {\n            key: \"build\",\n            value: function build() {\n                if (this.ready) {\n                    return;\n                }\n                var element = this.element, options = this.options;\n                var parent = element.parentNode;\n                var template = document.createElement('div');\n                template.innerHTML = TEMPLATE;\n                var viewer = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n                var title = viewer.querySelector(\".\".concat(NAMESPACE, \"-title\"));\n                var toolbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-toolbar\"));\n                var navbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-navbar\"));\n                var button = viewer.querySelector(\".\".concat(NAMESPACE, \"-button\"));\n                var canvas = viewer.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n                this.parent = parent;\n                this.viewer = viewer;\n                this.title = title;\n                this.toolbar = toolbar;\n                this.navbar = navbar;\n                this.button = button;\n                this.canvas = canvas;\n                this.footer = viewer.querySelector(\".\".concat(NAMESPACE, \"-footer\"));\n                this.tooltipBox = viewer.querySelector(\".\".concat(NAMESPACE, \"-tooltip\"));\n                this.player = viewer.querySelector(\".\".concat(NAMESPACE, \"-player\"));\n                this.list = viewer.querySelector(\".\".concat(NAMESPACE, \"-list\"));\n                viewer.id = \"\".concat(NAMESPACE).concat(this.id);\n                title.id = \"\".concat(NAMESPACE, \"Title\").concat(this.id);\n                addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(Array.isArray(options.title) ? options.title[0] : options.title));\n                addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n                toggleClass(button, CLASS_HIDE, !options.button);\n                if (options.keyboard) {\n                    button.setAttribute('tabindex', 0);\n                }\n                if (options.backdrop) {\n                    addClass(viewer, \"\".concat(NAMESPACE, \"-backdrop\"));\n                    if (!options.inline && options.backdrop !== 'static') {\n                        setData(canvas, DATA_ACTION, 'hide');\n                    }\n                }\n                if (isString(options.className) && options.className) {\n                    // In case there are multiple class names\n                    options.className.split(REGEXP_SPACES).forEach(function (className) {\n                        addClass(viewer, className);\n                    });\n                }\n                if (options.toolbar) {\n                    var list = document.createElement('ul');\n                    var custom = isPlainObject(options.toolbar);\n                    var zoomButtons = BUTTONS.slice(0, 3);\n                    var rotateButtons = BUTTONS.slice(7, 9);\n                    var scaleButtons = BUTTONS.slice(9);\n                    if (!custom) {\n                        addClass(toolbar, getResponsiveClass(options.toolbar));\n                    }\n                    forEach(custom ? options.toolbar : BUTTONS, function (value, index) {\n                        var deep = custom && isPlainObject(value);\n                        var name = custom ? hyphenate(index) : value;\n                        var show = deep && !isUndefined(value.show) ? value.show : value;\n                        if (!show || !options.zoomable && zoomButtons.indexOf(name) !== -1 || !options.rotatable && rotateButtons.indexOf(name) !== -1 || !options.scalable && scaleButtons.indexOf(name) !== -1) {\n                            return;\n                        }\n                        var size = deep && !isUndefined(value.size) ? value.size : value;\n                        var click = deep && !isUndefined(value.click) ? value.click : value;\n                        var item = document.createElement('li');\n                        if (options.keyboard) {\n                            item.setAttribute('tabindex', 0);\n                        }\n                        item.setAttribute('role', 'button');\n                        addClass(item, \"\".concat(NAMESPACE, \"-\").concat(name));\n                        if (!isFunction(click)) {\n                            setData(item, DATA_ACTION, name);\n                        }\n                        if (isNumber(show)) {\n                            addClass(item, getResponsiveClass(show));\n                        }\n                        if (['small', 'large'].indexOf(size) !== -1) {\n                            addClass(item, \"\".concat(NAMESPACE, \"-\").concat(size));\n                        }\n                        else if (name === 'play') {\n                            addClass(item, \"\".concat(NAMESPACE, \"-large\"));\n                        }\n                        if (isFunction(click)) {\n                            addListener(item, EVENT_CLICK, click);\n                        }\n                        list.appendChild(item);\n                    });\n                    toolbar.appendChild(list);\n                }\n                else {\n                    addClass(toolbar, CLASS_HIDE);\n                }\n                if (!options.rotatable) {\n                    var rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n                    addClass(rotates, CLASS_INVISIBLE);\n                    forEach(rotates, function (rotate) {\n                        toolbar.appendChild(rotate);\n                    });\n                }\n                if (options.inline) {\n                    addClass(button, CLASS_FULLSCREEN);\n                    setStyle(viewer, {\n                        zIndex: options.zIndexInline\n                    });\n                    if (window.getComputedStyle(parent).position === 'static') {\n                        setStyle(parent, {\n                            position: 'relative'\n                        });\n                    }\n                    parent.insertBefore(viewer, element.nextSibling);\n                }\n                else {\n                    addClass(button, CLASS_CLOSE);\n                    addClass(viewer, CLASS_FIXED);\n                    addClass(viewer, CLASS_FADE);\n                    addClass(viewer, CLASS_HIDE);\n                    setStyle(viewer, {\n                        zIndex: options.zIndex\n                    });\n                    var container = options.container;\n                    if (isString(container)) {\n                        container = element.ownerDocument.querySelector(container);\n                    }\n                    if (!container) {\n                        container = this.body;\n                    }\n                    container.appendChild(viewer);\n                }\n                if (options.inline) {\n                    this.render();\n                    this.bind();\n                    this.isShown = true;\n                }\n                this.ready = true;\n                if (isFunction(options.ready)) {\n                    addListener(element, EVENT_READY, options.ready, {\n                        once: true\n                    });\n                }\n                if (dispatchEvent(element, EVENT_READY) === false) {\n                    this.ready = false;\n                    return;\n                }\n                if (this.ready && options.inline) {\n                    this.view(this.index);\n                }\n            }\n            /**\n             * Get the no conflict viewer class.\n             * @returns {Viewer} The viewer class.\n             */\n        }], [{\n            key: \"noConflict\",\n            value: function noConflict() {\n                window.Viewer = AnotherViewer;\n                return Viewer;\n            }\n            /**\n             * Change the default options.\n             * @param {Object} options - The new default options.\n             */\n        }, {\n            key: \"setDefaults\",\n            value: function setDefaults(options) {\n                assign(DEFAULTS, isPlainObject(options) && options);\n            }\n        }]);\n    return Viewer;\n}();\nassign(Viewer.prototype, render, events, handlers, methods, others);\nexport default Viewer;\n"],"mappings":"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","ignoreList":[]}